<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Middle.Ledger</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="54" class="Keyword">open</a> <a id="59" href="Prelude.Init.html#2769" class="Module">Integer</a> <a id="67" class="Keyword">using</a> <a id="73" class="Symbol">()</a> <a id="76" class="Keyword">renaming</a> <a id="85" class="Symbol">(</a><a id="86" href="Data.Integer.Base.html#5023" class="Function Operator">_-_</a> <a id="90" class="Symbol">to</a> <a id="93" class="Function Operator">_-ℤ_</a><a id="97" class="Symbol">;</a> <a id="99" href="Data.Integer.Base.html#4844" class="Function Operator">_+_</a> <a id="103" class="Symbol">to</a> <a id="106" class="Function Operator">_+ℤ_</a><a id="110" class="Symbol">)</a>
<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="138" class="Keyword">open</a> <a id="143" class="Keyword">import</a> <a id="150" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="163" class="Keyword">open</a> <a id="168" class="Keyword">import</a> <a id="175" href="Prelude.Maps.html" class="Module">Prelude.Maps</a> <a id="188" class="Keyword">hiding</a> <a id="195" class="Symbol">(</a><a id="196" href="Prelude.Maps.Interface.html#12491" class="Function">singleton</a><a id="205" class="Symbol">;</a> <a id="207" href="Prelude.Maps.Interface.html#516" class="Function Operator">_∪_</a><a id="210" class="Symbol">;</a> <a id="212" href="Prelude.Maps.Interface.html#504" class="Function">∅</a><a id="213" class="Symbol">)</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Prelude.Apartness.html" class="Module">Prelude.Apartness</a>

<a id="246" class="Keyword">module</a> <a id="253" href="Middle.Ledger.html" class="Module">Middle.Ledger</a>
  <a id="269" class="Symbol">(</a><a id="270" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="275" class="Symbol">:</a> <a id="277" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="280" class="Symbol">)</a> <a id="282" class="Comment">-- a fixed set of participants</a>
  <a id="315" class="Symbol">⦃</a> <a id="317" href="Middle.Ledger.html#317" class="Bound">_</a> <a id="319" class="Symbol">:</a> <a id="321" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="327" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="332" class="Symbol">⦄</a>
  <a id="336" class="Keyword">where</a>

<a id="343" class="Comment">-- The state of a ledger is a collection of participants, along with their balance.</a>
<a id="S"></a><a id="427" href="Middle.Ledger.html#427" class="Function">S</a> <a id="429" class="Symbol">:</a> <a id="431" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="435" href="Middle.Ledger.html#427" class="Function">S</a> <a id="437" class="Symbol">=</a> <a id="439" href="Prelude.Maps.Interface.html#487" class="Function">Map⟨</a> <a id="444" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="449" href="Prelude.Maps.Interface.html#487" class="Function">↦</a> <a id="451" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="453" href="Prelude.Maps.Interface.html#487" class="Function">⟩</a>

<a id="456" class="Comment">-- A transaction is transferring money from one participant to another</a>
<a id="527" class="Keyword">data</a> <a id="Tx"></a><a id="532" href="Middle.Ledger.html#532" class="Datatype">Tx</a> <a id="535" class="Symbol">:</a> <a id="537" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="541" class="Keyword">where</a>
  <a id="Tx._—→⟨_⟩_"></a><a id="549" href="Middle.Ledger.html#549" class="InductiveConstructor Operator">_—→⟨_⟩_</a> <a id="557" class="Symbol">:</a> <a id="559" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="564" class="Symbol">→</a> <a id="566" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="568" class="Symbol">→</a> <a id="570" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="575" class="Symbol">→</a> <a id="577" href="Middle.Ledger.html#532" class="Datatype">Tx</a>

<a id="581" class="Comment">-- A ledger is a list of transactions</a>
<a id="L"></a><a id="619" href="Middle.Ledger.html#619" class="Function">L</a> <a id="621" class="Symbol">=</a> <a id="623" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="628" href="Middle.Ledger.html#532" class="Datatype">Tx</a>

<a id="632" class="Keyword">variable</a>
  <a id="643" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="645" href="Middle.Ledger.html#645" class="Generalizable">s′</a> <a id="648" href="Middle.Ledger.html#648" class="Generalizable">s″</a> <a id="651" href="Middle.Ledger.html#651" class="Generalizable">s₁</a> <a id="654" href="Middle.Ledger.html#654" class="Generalizable">s₂</a> <a id="657" class="Symbol">:</a> <a id="659" href="Middle.Ledger.html#427" class="Function">S</a>
  <a id="663" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="665" href="Middle.Ledger.html#665" class="Generalizable">t′</a> <a id="668" href="Middle.Ledger.html#668" class="Generalizable">t″</a> <a id="671" class="Symbol">:</a> <a id="673" href="Middle.Ledger.html#532" class="Datatype">Tx</a>
  <a id="678" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="680" href="Middle.Ledger.html#680" class="Generalizable">l′</a> <a id="683" href="Middle.Ledger.html#683" class="Generalizable">l″</a> <a id="686" class="Symbol">:</a> <a id="688" href="Middle.Ledger.html#619" class="Function">L</a>
  <a id="692" href="Middle.Ledger.html#692" class="Generalizable">ls</a> <a id="695" href="Middle.Ledger.html#695" class="Generalizable">ls′</a> <a id="699" href="Middle.Ledger.html#699" class="Generalizable">ls″</a> <a id="703" class="Symbol">:</a> <a id="705" href="Middle.Ledger.html#619" class="Function">L</a> <a id="707" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="709" href="Middle.Ledger.html#427" class="Function">S</a>

<a id="712" class="Comment">-- ** Denotational semantics</a>

<a id="Domain"></a><a id="742" href="Middle.Ledger.html#742" class="Function">Domain</a> <a id="749" class="Symbol">=</a> <a id="751" href="Middle.Ledger.html#427" class="Function">S</a> <a id="753" class="Symbol">→</a> <a id="755" href="Middle.Ledger.html#427" class="Function">S</a>

<a id="758" class="Keyword">record</a> <a id="Denotable"></a><a id="765" href="Middle.Ledger.html#765" class="Record">Denotable</a> <a id="775" class="Symbol">(</a><a id="776" href="Middle.Ledger.html#776" class="Bound">A</a> <a id="778" class="Symbol">:</a> <a id="780" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="783" class="Symbol">)</a> <a id="785" class="Symbol">:</a> <a id="787" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="791" class="Keyword">where</a>
  <a id="799" class="Keyword">field</a>
    <a id="Denotable.⟦_⟧"></a><a id="809" href="Middle.Ledger.html#809" class="Field Operator">⟦_⟧</a> <a id="813" class="Symbol">:</a> <a id="815" href="Middle.Ledger.html#776" class="Bound">A</a> <a id="817" class="Symbol">→</a> <a id="819" href="Middle.Ledger.html#742" class="Function">Domain</a>
<a id="826" class="Keyword">open</a> <a id="831" href="Middle.Ledger.html#765" class="Module">Denotable</a> <a id="841" class="Symbol">{{...}}</a> <a id="849" class="Keyword">public</a>

<a id="857" class="Keyword">instance</a>
  <a id="⟦Tx⟧"></a><a id="868" href="Middle.Ledger.html#868" class="Function">⟦Tx⟧</a> <a id="873" class="Symbol">:</a> <a id="875" href="Middle.Ledger.html#765" class="Record">Denotable</a> <a id="885" href="Middle.Ledger.html#532" class="Datatype">Tx</a>
  <a id="890" href="Middle.Ledger.html#868" class="Function">⟦Tx⟧</a> <a id="895" class="Symbol">.</a><a id="896" href="Middle.Ledger.html#809" class="Field Operator">⟦_⟧</a> <a id="900" class="Symbol">(</a><a id="901" href="Middle.Ledger.html#901" class="Bound">p₁</a> <a id="904" href="Middle.Ledger.html#549" class="InductiveConstructor Operator">—→⟨</a> <a id="908" href="Middle.Ledger.html#908" class="Bound">n</a> <a id="910" href="Middle.Ledger.html#549" class="InductiveConstructor Operator">⟩</a> <a id="912" href="Middle.Ledger.html#912" class="Bound">p₂</a><a id="914" class="Symbol">)</a> <a id="916" class="Symbol">=</a> <a id="918" href="Prelude.Maps.Interface.html#15139" class="Function">modify</a> <a id="925" href="Middle.Ledger.html#912" class="Bound">p₂</a> <a id="928" class="Symbol">(</a><a id="929" href="Middle.Ledger.html#106" class="Function Operator">_+ℤ</a> <a id="933" href="Middle.Ledger.html#908" class="Bound">n</a><a id="934" class="Symbol">)</a> <a id="936" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="938" href="Prelude.Maps.Interface.html#15139" class="Function">modify</a> <a id="945" href="Middle.Ledger.html#901" class="Bound">p₁</a> <a id="948" class="Symbol">(</a><a id="949" href="Middle.Ledger.html#93" class="Function Operator">_-ℤ</a> <a id="953" href="Middle.Ledger.html#908" class="Bound">n</a><a id="954" class="Symbol">)</a>

  <a id="⟦L⟧"></a><a id="959" href="Middle.Ledger.html#959" class="Function">⟦L⟧</a> <a id="963" class="Symbol">:</a> <a id="965" href="Middle.Ledger.html#765" class="Record">Denotable</a> <a id="975" href="Middle.Ledger.html#619" class="Function">L</a>
  <a id="979" href="Middle.Ledger.html#959" class="Function">⟦L⟧</a> <a id="983" class="Symbol">.</a><a id="984" href="Middle.Ledger.html#809" class="Field Operator">⟦_⟧</a> <a id="988" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>      <a id="996" href="Middle.Ledger.html#996" class="Bound">s</a> <a id="998" class="Symbol">=</a> <a id="1000" href="Middle.Ledger.html#996" class="Bound">s</a>
  <a id="1004" href="Middle.Ledger.html#959" class="Function">⟦L⟧</a> <a id="1008" class="Symbol">.</a><a id="1009" href="Middle.Ledger.html#809" class="Field Operator">⟦_⟧</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Middle.Ledger.html#1014" class="Bound">t</a> <a id="1016" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1018" href="Middle.Ledger.html#1018" class="Bound">l</a><a id="1019" class="Symbol">)</a> <a id="1021" class="Symbol">=</a> <a id="1023" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1025" href="Middle.Ledger.html#1018" class="Bound">l</a> <a id="1027" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1029" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1031" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1033" href="Middle.Ledger.html#1014" class="Bound">t</a> <a id="1035" href="Middle.Ledger.html#809" class="Field Operator">⟧</a>

<a id="comp"></a><a id="1038" href="Middle.Ledger.html#1038" class="Function">comp</a> <a id="1043" class="Symbol">:</a> <a id="1045" class="Symbol">∀</a> <a id="1047" href="Middle.Ledger.html#1047" class="Bound">x</a> <a id="1049" class="Symbol">→</a> <a id="1051" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1053" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1055" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="1058" href="Middle.Ledger.html#680" class="Generalizable">l′</a> <a id="1061" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1063" href="Middle.Ledger.html#1047" class="Bound">x</a> <a id="1065" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1067" class="Symbol">(</a><a id="1068" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1070" href="Middle.Ledger.html#680" class="Generalizable">l′</a> <a id="1073" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1075" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1077" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1079" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1081" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="1082" class="Symbol">)</a> <a id="1084" href="Middle.Ledger.html#1047" class="Bound">x</a>
<a id="1086" href="Middle.Ledger.html#1038" class="Function">comp</a> <a id="1091" class="Symbol">{</a><a id="1092" class="Argument">l</a> <a id="1094" class="Symbol">=</a> <a id="1096" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1098" class="Symbol">}</a>    <a id="1103" class="Symbol">{</a><a id="1104" href="Middle.Ledger.html#1104" class="Bound">l′</a><a id="1106" class="Symbol">}</a> <a id="1108" href="Middle.Ledger.html#1108" class="Bound">x</a> <a id="1110" class="Symbol">=</a> <a id="1112" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1117" href="Middle.Ledger.html#1038" class="Function">comp</a> <a id="1122" class="Symbol">{</a><a id="1123" class="Argument">l</a> <a id="1125" class="Symbol">=</a> <a id="1127" href="Middle.Ledger.html#1127" class="Bound">t</a> <a id="1129" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1131" href="Middle.Ledger.html#1131" class="Bound">l</a><a id="1132" class="Symbol">}</a> <a id="1134" class="Symbol">{</a><a id="1135" href="Middle.Ledger.html#1135" class="Bound">l′</a><a id="1137" class="Symbol">}</a> <a id="1139" href="Middle.Ledger.html#1139" class="Bound">x</a> <a id="1141" class="Keyword">rewrite</a> <a id="1149" href="Middle.Ledger.html#1038" class="Function">comp</a> <a id="1154" class="Symbol">{</a><a id="1155" href="Middle.Ledger.html#1131" class="Bound">l</a><a id="1156" class="Symbol">}{</a><a id="1158" href="Middle.Ledger.html#1135" class="Bound">l′</a><a id="1160" class="Symbol">}</a> <a id="1162" class="Symbol">(</a><a id="1163" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1165" href="Middle.Ledger.html#1127" class="Bound">t</a> <a id="1167" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1169" href="Middle.Ledger.html#1139" class="Bound">x</a><a id="1170" class="Symbol">)</a> <a id="1172" class="Symbol">=</a> <a id="1174" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1180" class="Comment">-- ** Operational semantics</a>

<a id="1209" class="Keyword">infix</a> <a id="1215" class="Number">0</a> <a id="1217" href="Middle.Ledger.html#1241" class="Datatype Operator">_—→_</a> <a id="1222" href="Middle.Ledger.html#1441" class="Datatype Operator">_—→⋆_</a> <a id="1228" href="Middle.Ledger.html#1603" class="Function Operator">_—→⋆′_</a>

<a id="1236" class="Keyword">data</a> <a id="_—→_"></a><a id="1241" href="Middle.Ledger.html#1241" class="Datatype Operator">_—→_</a> <a id="1246" class="Symbol">:</a> <a id="1248" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1250" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1252" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1258" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1260" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1262" class="Symbol">→</a> <a id="1264" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1268" class="Keyword">where</a>
  <a id="_—→_.singleStep"></a><a id="1276" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="1287" class="Symbol">:</a>
    <a id="1293" class="Comment">------------------------</a>
    <a id="1322" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="1324" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1326" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1328" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1330" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="1332" href="Middle.Ledger.html#1241" class="Datatype Operator">—→</a> <a id="1335" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1337" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1339" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1341" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="1343" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1345" href="Middle.Ledger.html#643" class="Generalizable">s</a>

<a id="1348" class="Keyword">data</a> <a id="_—→′_"></a><a id="1353" href="Middle.Ledger.html#1353" class="Datatype Operator">_—→′_</a> <a id="1359" class="Symbol">:</a> <a id="1361" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1363" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1365" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1371" class="Symbol">→</a> <a id="1373" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1377" class="Keyword">where</a>
  <a id="_—→′_.finalStep"></a><a id="1385" href="Middle.Ledger.html#1385" class="InductiveConstructor">finalStep</a> <a id="1395" class="Symbol">:</a>
    <a id="1401" class="Comment">--------------</a>
    <a id="1420" class="Symbol">(</a><a id="1421" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1424" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1426" href="Middle.Ledger.html#643" class="Generalizable">s</a><a id="1427" class="Symbol">)</a> <a id="1429" href="Middle.Ledger.html#1353" class="Datatype Operator">—→′</a> <a id="1433" href="Middle.Ledger.html#643" class="Generalizable">s</a>

<a id="1436" class="Keyword">data</a> <a id="_—→⋆_"></a><a id="1441" href="Middle.Ledger.html#1441" class="Datatype Operator">_—→⋆_</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1451" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1453" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1455" class="Symbol">→</a> <a id="1457" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1459" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1461" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1463" class="Symbol">→</a> <a id="1465" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1469" class="Keyword">where</a>
   <a id="_—→⋆_.base"></a><a id="1478" href="Middle.Ledger.html#1478" class="InductiveConstructor">base</a> <a id="1483" class="Symbol">:</a>
       <a id="1492" class="Comment">---------</a>
       <a id="1509" href="Middle.Ledger.html#692" class="Generalizable">ls</a> <a id="1512" href="Middle.Ledger.html#1441" class="Datatype Operator">—→⋆</a> <a id="1516" href="Middle.Ledger.html#692" class="Generalizable">ls</a>

   <a id="_—→⋆_.step"></a><a id="1523" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="1528" class="Symbol">:</a>
       <a id="1537" href="Middle.Ledger.html#692" class="Generalizable">ls</a> <a id="1540" href="Middle.Ledger.html#1241" class="Datatype Operator">—→</a> <a id="1543" href="Middle.Ledger.html#695" class="Generalizable">ls′</a>
     <a id="1552" class="Symbol">→</a> <a id="1554" href="Middle.Ledger.html#695" class="Generalizable">ls′</a> <a id="1558" href="Middle.Ledger.html#1441" class="Datatype Operator">—→⋆</a> <a id="1562" href="Middle.Ledger.html#699" class="Generalizable">ls″</a>
       <a id="1573" class="Comment">----------</a>
     <a id="1589" class="Symbol">→</a> <a id="1591" href="Middle.Ledger.html#692" class="Generalizable">ls</a> <a id="1594" href="Middle.Ledger.html#1441" class="Datatype Operator">—→⋆</a> <a id="1598" href="Middle.Ledger.html#699" class="Generalizable">ls″</a>

<a id="_—→⋆′_"></a><a id="1603" href="Middle.Ledger.html#1603" class="Function Operator">_—→⋆′_</a> <a id="1610" class="Symbol">:</a> <a id="1612" href="Middle.Ledger.html#619" class="Function">L</a> <a id="1614" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1616" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1618" class="Symbol">→</a> <a id="1620" href="Middle.Ledger.html#427" class="Function">S</a> <a id="1622" class="Symbol">→</a> <a id="1624" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="1628" href="Middle.Ledger.html#1628" class="Bound">ls</a> <a id="1631" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="1636" href="Middle.Ledger.html#1636" class="Bound">s</a> <a id="1638" class="Symbol">=</a> <a id="1640" href="Middle.Ledger.html#1628" class="Bound">ls</a> <a id="1643" href="Middle.Ledger.html#1441" class="Datatype Operator">—→⋆</a> <a id="1647" class="Symbol">(</a><a id="1648" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1651" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1653" href="Middle.Ledger.html#1636" class="Bound">s</a><a id="1654" class="Symbol">)</a>

<a id="comp′"></a><a id="1657" href="Middle.Ledger.html#1657" class="Function">comp′</a> <a id="1663" class="Symbol">:</a> <a id="1665" href="Middle.Ledger.html#678" class="Generalizable">l</a>       <a id="1673" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1675" href="Middle.Ledger.html#643" class="Generalizable">s</a>  <a id="1678" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="1683" href="Middle.Ledger.html#645" class="Generalizable">s′</a>
      <a id="1692" class="Symbol">→</a> <a id="1694" href="Middle.Ledger.html#680" class="Generalizable">l′</a>      <a id="1702" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1704" href="Middle.Ledger.html#645" class="Generalizable">s′</a> <a id="1707" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="1712" href="Middle.Ledger.html#648" class="Generalizable">s″</a>
      <a id="1721" class="Symbol">→</a> <a id="1723" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1725" href="Data.List.Base.html#1810" class="Function Operator">++</a> <a id="1728" href="Middle.Ledger.html#680" class="Generalizable">l′</a> <a id="1731" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1733" href="Middle.Ledger.html#643" class="Generalizable">s</a>  <a id="1736" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="1741" href="Middle.Ledger.html#648" class="Generalizable">s″</a>
<a id="1744" href="Middle.Ledger.html#1657" class="Function">comp′</a> <a id="1750" class="Symbol">{</a><a id="1751" class="Argument">l</a> <a id="1753" class="Symbol">=</a> <a id="1755" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1757" class="Symbol">}</a>    <a id="1762" href="Middle.Ledger.html#1478" class="InductiveConstructor">base</a>                   <a id="1785" href="Middle.Ledger.html#1785" class="Bound">s′→s″</a> <a id="1791" class="Symbol">=</a> <a id="1793" href="Middle.Ledger.html#1785" class="Bound">s′→s″</a>
<a id="1799" href="Middle.Ledger.html#1657" class="Function">comp′</a> <a id="1805" class="Symbol">{</a><a id="1806" class="Argument">l</a> <a id="1808" class="Symbol">=</a> <a id="1810" class="Symbol">_</a> <a id="1812" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1814" class="Symbol">_}</a> <a id="1817" class="Symbol">(</a><a id="1818" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="1823" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="1834" href="Middle.Ledger.html#1834" class="Bound">s→s′</a><a id="1838" class="Symbol">)</a> <a id="1840" href="Middle.Ledger.html#1840" class="Bound">s′→s″</a> <a id="1846" class="Symbol">=</a> <a id="1848" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="1853" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="1864" class="Symbol">(</a><a id="1865" href="Middle.Ledger.html#1657" class="Function">comp′</a> <a id="1871" href="Middle.Ledger.html#1834" class="Bound">s→s′</a> <a id="1876" href="Middle.Ledger.html#1840" class="Bound">s′→s″</a><a id="1881" class="Symbol">)</a>

<a id="oper-base⋆"></a><a id="1884" href="Middle.Ledger.html#1884" class="Function">oper-base⋆</a> <a id="1895" class="Symbol">:</a> <a id="1897" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1899" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1901" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="1903" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="1908" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="1910" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="1912" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="1914" href="Middle.Ledger.html#643" class="Generalizable">s</a>
<a id="1916" href="Middle.Ledger.html#1884" class="Function">oper-base⋆</a> <a id="1927" class="Symbol">{</a><a id="1928" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1930" class="Symbol">}</a>    <a id="1935" class="Symbol">=</a> <a id="1937" href="Middle.Ledger.html#1478" class="InductiveConstructor">base</a>
<a id="1942" href="Middle.Ledger.html#1884" class="Function">oper-base⋆</a> <a id="1953" class="Symbol">{_</a> <a id="1956" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1958" class="Symbol">_}</a> <a id="1961" class="Symbol">=</a> <a id="1963" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="1968" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="1979" href="Middle.Ledger.html#1884" class="Function">oper-base⋆</a>

<a id="1991" class="Comment">-- ** Relating denotational and operational semantics</a>

<a id="denot⇔oper"></a><a id="2046" href="Middle.Ledger.html#2046" class="Function">denot⇔oper</a> <a id="2057" class="Symbol">:</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="2062" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2064" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="2066" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2068" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2070" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2072" class="Symbol">)</a> <a id="2074" href="Prelude.General.html#630" class="Function Operator">⇔</a> <a id="2076" class="Symbol">(</a><a id="2077" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2079" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2081" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2083" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="2088" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2090" class="Symbol">)</a>
<a id="2092" href="Middle.Ledger.html#2046" class="Function">denot⇔oper</a> <a id="2103" class="Symbol">=</a> <a id="2105" href="Middle.Ledger.html#2141" class="Function">denot→oper</a> <a id="2116" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2118" href="Middle.Ledger.html#2299" class="Function">oper→denot</a>
  <a id="2131" class="Keyword">where</a>
    <a id="2141" href="Middle.Ledger.html#2141" class="Function">denot→oper</a> <a id="2152" class="Symbol">:</a> <a id="2154" class="Symbol">(</a><a id="2155" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="2157" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2159" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="2161" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2163" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2165" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2167" class="Symbol">)</a> <a id="2169" class="Symbol">→</a> <a id="2171" class="Symbol">(</a><a id="2172" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2174" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2176" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2178" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="2183" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2185" class="Symbol">)</a>
    <a id="2191" href="Middle.Ledger.html#2141" class="Function">denot→oper</a> <a id="2202" class="Symbol">{</a><a id="2203" class="Argument">l</a> <a id="2205" class="Symbol">=</a> <a id="2207" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2209" class="Symbol">}</a>    <a id="2214" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2219" class="Symbol">=</a> <a id="2221" href="Middle.Ledger.html#1478" class="InductiveConstructor">base</a>
    <a id="2230" href="Middle.Ledger.html#2141" class="Function">denot→oper</a> <a id="2241" class="Symbol">{</a><a id="2242" class="Argument">l</a> <a id="2244" class="Symbol">=</a> <a id="2246" class="Symbol">_</a> <a id="2248" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2250" class="Symbol">_}</a> <a id="2253" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2258" class="Symbol">=</a> <a id="2260" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="2265" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="2276" class="Symbol">(</a><a id="2277" href="Middle.Ledger.html#2141" class="Function">denot→oper</a> <a id="2288" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2292" class="Symbol">)</a>

    <a id="2299" href="Middle.Ledger.html#2299" class="Function">oper→denot</a> <a id="2310" class="Symbol">:</a> <a id="2312" class="Symbol">(</a><a id="2313" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2315" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2317" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2319" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="2324" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2326" class="Symbol">)</a> <a id="2328" class="Symbol">→</a> <a id="2330" class="Symbol">(</a><a id="2331" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="2333" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2335" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="2337" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="2339" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2341" href="Middle.Ledger.html#645" class="Generalizable">s′</a><a id="2343" class="Symbol">)</a>
    <a id="2349" href="Middle.Ledger.html#2299" class="Function">oper→denot</a> <a id="2360" class="Symbol">{</a><a id="2361" class="Argument">l</a> <a id="2363" class="Symbol">=</a> <a id="2365" class="DottedPattern Symbol">.</a><a id="2366" href="Agda.Builtin.List.html#185" class="DottedPattern InductiveConstructor">[]</a><a id="2368" class="Symbol">}</a>   <a id="2372" href="Middle.Ledger.html#1478" class="InductiveConstructor">base</a>                <a id="2392" class="Symbol">=</a> <a id="2394" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="2403" href="Middle.Ledger.html#2299" class="Function">oper→denot</a> <a id="2414" class="Symbol">{</a><a id="2415" class="Argument">l</a> <a id="2417" class="Symbol">=</a> <a id="2419" class="Symbol">_</a> <a id="2421" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2423" class="Symbol">_}</a> <a id="2426" class="Symbol">(</a><a id="2427" href="Middle.Ledger.html#1523" class="InductiveConstructor">step</a> <a id="2432" href="Middle.Ledger.html#1276" class="InductiveConstructor">singleStep</a> <a id="2443" href="Middle.Ledger.html#2443" class="Bound">p</a><a id="2444" class="Symbol">)</a> <a id="2446" class="Symbol">=</a> <a id="2448" href="Middle.Ledger.html#2299" class="Function">oper→denot</a> <a id="2459" href="Middle.Ledger.html#2443" class="Bound">p</a>

<a id="2462" class="Comment">-- ** Axiomatic semantics</a>
<a id="Predˢ"></a><a id="2488" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="2494" class="Symbol">=</a> <a id="2496" href="Relation.Unary.html#1101" class="Function">Pred</a> <a id="2501" href="Middle.Ledger.html#427" class="Function">S</a> <a id="2503" href="Level.html#512" class="Function">0ℓ</a>

<a id="2507" class="Keyword">variable</a>
  <a id="2518" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="2520" href="Middle.Ledger.html#2520" class="Generalizable">P′</a> <a id="2523" href="Middle.Ledger.html#2523" class="Generalizable">P₁</a> <a id="2526" href="Middle.Ledger.html#2526" class="Generalizable">P₂</a> <a id="2529" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="2531" href="Middle.Ledger.html#2531" class="Generalizable">Q′</a> <a id="2534" href="Middle.Ledger.html#2534" class="Generalizable">Q₁</a> <a id="2537" href="Middle.Ledger.html#2537" class="Generalizable">Q₂</a> <a id="2540" href="Middle.Ledger.html#2540" class="Generalizable">R</a> <a id="2542" class="Symbol">:</a> <a id="2544" href="Middle.Ledger.html#2488" class="Function">Predˢ</a>

<a id="2551" class="Keyword">data</a> <a id="⟨_⟩_⟨_⟩"></a><a id="2556" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨_⟩_⟨_⟩</a> <a id="2564" class="Symbol">:</a> <a id="2566" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="2572" class="Symbol">→</a> <a id="2574" href="Middle.Ledger.html#619" class="Function">L</a> <a id="2576" class="Symbol">→</a> <a id="2578" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="2584" class="Symbol">→</a> <a id="2586" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="2591" class="Keyword">where</a>

  <a id="⟨_⟩_⟨_⟩.base"></a><a id="2600" href="Middle.Ledger.html#2600" class="InductiveConstructor">base</a> <a id="2605" class="Symbol">:</a>
    <a id="2611" class="Comment">--------------</a>
    <a id="2630" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2632" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="2634" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="2636" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2639" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2641" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="2643" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
  <a id="2647" class="Comment">--   -------------------------</a>
  <a id="2680" class="Comment">--   ⟨ P ∘ ⟦ t ⟧ ⟩ [ t ] ⟨ P ⟩</a>

  <a id="⟨_⟩_⟨_⟩.step"></a><a id="2714" href="Middle.Ledger.html#2714" class="InductiveConstructor">step</a> <a id="2719" class="Symbol">:</a>
      <a id="2727" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2729" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="2731" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="2733" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2735" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2737" href="Middle.Ledger.html#2540" class="Generalizable">R</a> <a id="2739" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
      <a id="2747" class="Comment">-------------------------</a>
    <a id="2777" class="Symbol">→</a> <a id="2779" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2781" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="2783" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2785" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="2787" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="2789" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="2791" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="2793" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="2795" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2797" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2799" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2801" href="Middle.Ledger.html#2540" class="Generalizable">R</a> <a id="2803" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
  <a id="2807" class="Comment">--     ⟨ P ⟩ l  ⟨ Q ⟩</a>
  <a id="2831" class="Comment">--   → ⟨ Q ⟩ l′ ⟨ R ⟩</a>
  <a id="2855" class="Comment">--     -------------------</a>
  <a id="2884" class="Comment">--   → ⟨ P ⟩ l ++ l′ ⟨ R ⟩</a>

  <a id="⟨_⟩_⟨_⟩.weaken-strengthen"></a><a id="2914" href="Middle.Ledger.html#2914" class="InductiveConstructor">weaken-strengthen</a> <a id="2932" class="Symbol">:</a>

      <a id="2941" href="Middle.Ledger.html#2520" class="Generalizable">P′</a> <a id="2944" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="2946" href="Middle.Ledger.html#2518" class="Generalizable">P</a>
    <a id="2952" class="Symbol">→</a> <a id="2954" href="Middle.Ledger.html#2529" class="Generalizable">Q</a>  <a id="2957" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="2959" href="Middle.Ledger.html#2531" class="Generalizable">Q′</a>
    <a id="2966" class="Symbol">→</a> <a id="2968" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2970" href="Middle.Ledger.html#2518" class="Generalizable">P</a>  <a id="2973" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="2975" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="2977" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="2979" href="Middle.Ledger.html#2529" class="Generalizable">Q</a>  <a id="2982" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
      <a id="2990" class="Comment">---------------</a>
    <a id="3010" class="Symbol">→</a> <a id="3012" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3014" href="Middle.Ledger.html#2520" class="Generalizable">P′</a> <a id="3017" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3019" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3021" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3023" href="Middle.Ledger.html#2531" class="Generalizable">Q′</a> <a id="3026" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>

<a id="3029" class="Comment">-- utilities</a>
<a id="axiom-base⋆"></a><a id="3042" href="Middle.Ledger.html#3042" class="Function">axiom-base⋆</a> <a id="3054" class="Symbol">:</a> <a id="3056" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3058" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3060" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3062" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3064" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3066" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3068" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3070" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3072" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3074" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3076" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
<a id="3078" href="Middle.Ledger.html#3042" class="Function">axiom-base⋆</a> <a id="3090" class="Symbol">{</a><a id="3091" class="Argument">l</a> <a id="3093" class="Symbol">=</a> <a id="3095" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3097" class="Symbol">}</a>    <a id="3102" class="Symbol">=</a> <a id="3104" href="Middle.Ledger.html#2600" class="InductiveConstructor">base</a>
<a id="3109" href="Middle.Ledger.html#3042" class="Function">axiom-base⋆</a> <a id="3121" class="Symbol">{</a><a id="3122" class="Argument">l</a> <a id="3124" class="Symbol">=</a> <a id="3126" class="Symbol">_</a> <a id="3128" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3130" class="Symbol">_}</a> <a id="3133" class="Symbol">=</a> <a id="3135" href="Middle.Ledger.html#2714" class="InductiveConstructor">step</a> <a id="3140" href="Middle.Ledger.html#3042" class="Function">axiom-base⋆</a>

<a id="3153" class="Keyword">postulate</a>
  <a id="⟦⟧-comm"></a><a id="3165" href="Middle.Ledger.html#3165" class="Postulate">⟦⟧-comm</a> <a id="3173" class="Symbol">:</a> <a id="3175" class="Symbol">(</a><a id="3176" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3178" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="3180" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3182" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3184" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3186" href="Middle.Ledger.html#665" class="Generalizable">t′</a> <a id="3189" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3190" class="Symbol">)</a> <a id="3192" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="3194" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3196" class="Symbol">(</a><a id="3197" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3199" href="Middle.Ledger.html#665" class="Generalizable">t′</a> <a id="3202" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3204" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3206" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3208" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="3210" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3211" class="Symbol">)</a> <a id="3213" href="Middle.Ledger.html#643" class="Generalizable">s</a>
<a id="3215" class="Comment">-- ⟦⟧-comm {A —→⟨ n ⟩ B}{A′ —→⟨ n′ ⟩ B′} = {!!}</a>

<a id="denot-comm"></a><a id="3264" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3275" class="Symbol">:</a> <a id="3277" class="Symbol">(</a><a id="3278" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3280" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="3282" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3284" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3286" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3288" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3290" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3291" class="Symbol">)</a> <a id="3293" href="Middle.Ledger.html#643" class="Generalizable">s</a> <a id="3295" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3297" class="Symbol">(</a><a id="3298" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3300" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3302" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3304" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3306" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3308" href="Middle.Ledger.html#663" class="Generalizable">t</a> <a id="3310" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3311" class="Symbol">)</a> <a id="3313" href="Middle.Ledger.html#643" class="Generalizable">s</a>
<a id="3315" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3326" class="Symbol">{</a><a id="3327" href="Middle.Ledger.html#3327" class="Bound">t</a><a id="3328" class="Symbol">}{</a><a id="3330" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3332" class="Symbol">}</a>    <a id="3337" class="Symbol">{</a><a id="3338" href="Middle.Ledger.html#3338" class="Bound">s</a><a id="3339" class="Symbol">}</a> <a id="3341" class="Symbol">=</a> <a id="3343" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="3348" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3359" class="Symbol">{</a><a id="3360" href="Middle.Ledger.html#3360" class="Bound">t</a><a id="3361" class="Symbol">}{</a><a id="3363" href="Middle.Ledger.html#3363" class="Bound">t′</a> <a id="3366" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3368" href="Middle.Ledger.html#3368" class="Bound">l</a><a id="3369" class="Symbol">}{</a><a id="3371" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3372" class="Symbol">}</a>
  <a id="3376" class="Keyword">rewrite</a> <a id="3384" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="3388" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3390" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3401" class="Symbol">{</a><a id="3402" href="Middle.Ledger.html#3363" class="Bound">t′</a><a id="3404" class="Symbol">}{</a><a id="3406" href="Middle.Ledger.html#3368" class="Bound">l</a><a id="3407" class="Symbol">}{</a><a id="3409" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3410" class="Symbol">}</a>
        <a id="3420" class="Symbol">|</a> <a id="3422" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="3426" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="3428" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3439" class="Symbol">{</a><a id="3440" href="Middle.Ledger.html#3363" class="Bound">t′</a><a id="3442" class="Symbol">}{</a><a id="3444" href="Middle.Ledger.html#3368" class="Bound">l</a><a id="3445" class="Symbol">}{</a><a id="3447" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3449" href="Middle.Ledger.html#3360" class="Bound">t</a> <a id="3451" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3453" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3454" class="Symbol">}</a>
        <a id="3464" class="Symbol">|</a> <a id="3466" href="Middle.Ledger.html#3165" class="Postulate">⟦⟧-comm</a> <a id="3474" class="Symbol">{</a><a id="3475" href="Middle.Ledger.html#3360" class="Bound">t</a><a id="3476" class="Symbol">}{</a><a id="3478" href="Middle.Ledger.html#3363" class="Bound">t′</a><a id="3480" class="Symbol">}{</a><a id="3482" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3484" href="Middle.Ledger.html#3368" class="Bound">l</a> <a id="3486" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3488" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3489" class="Symbol">}</a>
        <a id="3499" class="Symbol">|</a> <a id="3501" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3512" class="Symbol">{</a><a id="3513" href="Middle.Ledger.html#3360" class="Bound">t</a><a id="3514" class="Symbol">}{</a><a id="3516" href="Middle.Ledger.html#3368" class="Bound">l</a><a id="3517" class="Symbol">}{</a><a id="3519" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3520" class="Symbol">}</a>
        <a id="3530" class="Symbol">|</a> <a id="3532" href="Middle.Ledger.html#3264" class="Function">denot-comm</a> <a id="3543" class="Symbol">{</a><a id="3544" href="Middle.Ledger.html#3360" class="Bound">t</a><a id="3545" class="Symbol">}{</a><a id="3547" href="Middle.Ledger.html#3368" class="Bound">l</a><a id="3548" class="Symbol">}{</a><a id="3550" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3552" href="Middle.Ledger.html#3363" class="Bound">t′</a> <a id="3555" href="Middle.Ledger.html#809" class="Field Operator">⟧</a> <a id="3557" href="Middle.Ledger.html#3371" class="Bound">s</a><a id="3558" class="Symbol">}</a>
        <a id="3568" class="Symbol">=</a> <a id="3570" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="3576" class="Comment">-- equivalences</a>
<a id="axiom⇔denot"></a><a id="3592" href="Middle.Ledger.html#3592" class="Function">axiom⇔denot</a> <a id="3604" class="Symbol">:</a> <a id="3606" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3608" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3610" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3612" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3614" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3616" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3618" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3620" href="Prelude.General.html#630" class="Function Operator">⇔</a> <a id="3622" class="Symbol">(</a><a id="3623" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3625" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="3627" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3629" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3631" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3633" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3635" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3636" class="Symbol">)</a>
<a id="3638" href="Middle.Ledger.html#3592" class="Function">axiom⇔denot</a> <a id="3650" class="Symbol">=</a> <a id="3652" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3664" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3666" href="Middle.Ledger.html#3949" class="Function">denot→axiom</a>
  <a id="3680" class="Keyword">where</a>
    <a id="3690" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3702" class="Symbol">:</a> <a id="3704" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3706" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3708" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3710" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3712" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3714" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3716" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3718" class="Symbol">→</a> <a id="3720" class="Symbol">(</a><a id="3721" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3723" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="3725" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3727" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3729" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3731" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3733" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3734" class="Symbol">)</a>
    <a id="3740" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3752" href="Middle.Ledger.html#2600" class="InductiveConstructor">base</a>                              <a id="3786" href="Middle.Ledger.html#3786" class="Bound">Ps</a> <a id="3789" class="Symbol">=</a> <a id="3791" href="Middle.Ledger.html#3786" class="Bound">Ps</a>
    <a id="3798" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3810" class="Symbol">(</a><a id="3811" href="Middle.Ledger.html#2714" class="InductiveConstructor">step</a> <a id="3816" href="Middle.Ledger.html#3816" class="Bound">PlQ</a><a id="3819" class="Symbol">)</a>                        <a id="3844" class="Symbol">=</a> <a id="3846" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3858" href="Middle.Ledger.html#3816" class="Bound">PlQ</a>
    <a id="3866" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3878" class="Symbol">(</a><a id="3879" href="Middle.Ledger.html#2914" class="InductiveConstructor">weaken-strengthen</a> <a id="3897" href="Middle.Ledger.html#3897" class="Bound">P⊢P′</a> <a id="3902" href="Middle.Ledger.html#3902" class="Bound">Q′⊢Q</a> <a id="3907" href="Middle.Ledger.html#3907" class="Bound">PlQ</a><a id="3910" class="Symbol">)</a> <a id="3912" class="Symbol">=</a> <a id="3914" href="Middle.Ledger.html#3902" class="Bound">Q′⊢Q</a> <a id="3919" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3921" href="Middle.Ledger.html#3690" class="Function">axiom→denot</a> <a id="3933" href="Middle.Ledger.html#3907" class="Bound">PlQ</a> <a id="3937" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3939" href="Middle.Ledger.html#3897" class="Bound">P⊢P′</a>

    <a id="3949" href="Middle.Ledger.html#3949" class="Function">denot→axiom</a> <a id="3961" class="Symbol">:</a> <a id="3963" class="Symbol">(</a><a id="3964" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3966" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="3968" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3970" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3972" href="Middle.Ledger.html#809" class="Field Operator">⟦</a> <a id="3974" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3976" href="Middle.Ledger.html#809" class="Field Operator">⟧</a><a id="3977" class="Symbol">)</a> <a id="3979" class="Symbol">→</a> <a id="3981" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3983" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="3985" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="3987" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="3989" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="3991" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="3993" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a>
    <a id="3999" href="Middle.Ledger.html#3949" class="Function">denot→axiom</a> <a id="4011" class="Symbol">{</a><a id="4012" class="Argument">l</a> <a id="4014" class="Symbol">=</a> <a id="4016" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="4018" class="Symbol">}</a>    <a id="4023" href="Middle.Ledger.html#4023" class="Bound">H</a> <a id="4025" class="Symbol">=</a> <a id="4027" href="Middle.Ledger.html#2914" class="InductiveConstructor">weaken-strengthen</a> <a id="4045" class="Symbol">(λ</a> <a id="4048" href="Middle.Ledger.html#4048" class="Bound">x</a> <a id="4050" class="Symbol">→</a> <a id="4052" href="Middle.Ledger.html#4048" class="Bound">x</a><a id="4053" class="Symbol">)</a> <a id="4055" href="Middle.Ledger.html#4023" class="Bound">H</a> <a id="4057" href="Middle.Ledger.html#2600" class="InductiveConstructor">base</a>
    <a id="4066" href="Middle.Ledger.html#3949" class="Function">denot→axiom</a> <a id="4078" class="Symbol">{</a><a id="4079" class="Argument">l</a> <a id="4081" class="Symbol">=</a> <a id="4083" class="Symbol">_</a> <a id="4085" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4087" class="Symbol">_}</a> <a id="4090" href="Middle.Ledger.html#4090" class="Bound">H</a> <a id="4092" class="Symbol">=</a> <a id="4094" href="Middle.Ledger.html#2914" class="InductiveConstructor">weaken-strengthen</a> <a id="4112" href="Middle.Ledger.html#4090" class="Bound">H</a> <a id="4114" class="Symbol">(λ</a> <a id="4117" href="Middle.Ledger.html#4117" class="Bound">x</a> <a id="4119" class="Symbol">→</a> <a id="4121" href="Middle.Ledger.html#4117" class="Bound">x</a><a id="4122" class="Symbol">)</a> <a id="4124" href="Middle.Ledger.html#3042" class="Function">axiom-base⋆</a>

<a id="axiom⇔oper"></a><a id="4137" href="Middle.Ledger.html#4137" class="Function">axiom⇔oper</a> <a id="4148" class="Symbol">:</a> <a id="4150" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="4152" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="4154" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="4156" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="4158" href="Middle.Ledger.html#2556" class="Datatype Operator">⟨</a> <a id="4160" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="4162" href="Middle.Ledger.html#2556" class="Datatype Operator">⟩</a> <a id="4164" href="Prelude.General.html#630" class="Function Operator">⇔</a> <a id="4166" class="Symbol">(∀</a> <a id="4169" class="Symbol">{</a><a id="4170" href="Middle.Ledger.html#4170" class="Bound">s</a> <a id="4172" href="Middle.Ledger.html#4172" class="Bound">s′</a><a id="4174" class="Symbol">}</a> <a id="4176" class="Symbol">→</a> <a id="4178" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="4180" href="Middle.Ledger.html#4170" class="Bound">s</a> <a id="4182" class="Symbol">→</a> <a id="4184" href="Middle.Ledger.html#678" class="Generalizable">l</a> <a id="4186" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4188" href="Middle.Ledger.html#4170" class="Bound">s</a> <a id="4190" href="Middle.Ledger.html#1603" class="Function Operator">—→⋆′</a> <a id="4195" href="Middle.Ledger.html#4172" class="Bound">s′</a> <a id="4198" class="Symbol">→</a> <a id="4200" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="4202" href="Middle.Ledger.html#4172" class="Bound">s′</a><a id="4204" class="Symbol">)</a>
<a id="4206" href="Middle.Ledger.html#4137" class="Function">axiom⇔oper</a>
  <a id="4219" class="Comment">{- ** 1. proving from scratch -}</a>
  <a id="4254" class="Comment">-- = axiom→oper , oper→axiom</a>
  <a id="4285" class="Comment">-- where</a>
  <a id="4296" class="Comment">--   axiom→oper : ⟨ P ⟩ l ⟨ Q ⟩ → (∀ {s s′} → P s → l , s —→⋆′ s′ → Q s′)</a>
  <a id="4372" class="Comment">--   axiom→oper base                              Ps base                   = Ps</a>
  <a id="4455" class="Comment">--   axiom→oper (step PlQ)                        Ps (step singleStep s→s′) = axiom→oper PlQ Ps s→s′</a>
  <a id="4558" class="Comment">--   axiom→oper (weaken-strengthen P⊢P′ Q′⊢Q PlQ) Ps s→s′                   = Q′⊢Q $ axiom→oper PlQ (P⊢P′ Ps) s→s′</a>

  <a id="4676" class="Comment">--   oper→axiom : (∀ {s s′} → P s → l , s —→⋆′ s′ → Q s′) → ⟨ P ⟩ l ⟨ Q ⟩</a>
  <a id="4752" class="Comment">--   oper→axiom {l = []}    H = weaken-strengthen id (flip H base) base</a>
  <a id="4826" class="Comment">--   oper→axiom {l = _ ∷ _} H = weaken-strengthen (λ Ps → H Ps oper-base⋆) id axiom-base⋆</a>

  <a id="4919" class="Comment">{- ** 2. composing axiom⇔denot ∘ denot⇔oper -}</a>
  <a id="4968" class="Symbol">=</a> <a id="4970" class="Symbol">(λ{</a> <a id="4974" href="Middle.Ledger.html#4974" class="Bound">P⊢</a> <a id="4977" href="Middle.Ledger.html#4977" class="Bound">Ps</a> <a id="4980" href="Middle.Ledger.html#4980" class="Bound">s→s′</a> <a id="4985" class="Symbol">→</a> <a id="4987" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="4993" class="Symbol">_</a> <a id="4995" class="Symbol">(</a><a id="4996" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="5002" href="Middle.Ledger.html#2046" class="Function">denot⇔oper</a> <a id="5013" href="Middle.Ledger.html#4980" class="Bound">s→s′</a><a id="5017" class="Symbol">)</a> <a id="5019" class="Symbol">(</a><a id="5020" href="Middle.Ledger.html#4974" class="Bound">P⊢</a> <a id="5023" href="Middle.Ledger.html#4977" class="Bound">Ps</a><a id="5025" class="Symbol">)})</a> <a id="5029" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="5031" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="5037" href="Middle.Ledger.html#3592" class="Function">axiom⇔denot</a>
  <a id="5051" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5053" class="Symbol">λ</a> <a id="5055" href="Middle.Ledger.html#5055" class="Bound">H</a> <a id="5057" class="Symbol">→</a> <a id="5059" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="5065" href="Middle.Ledger.html#3592" class="Function">axiom⇔denot</a> <a id="5077" class="Symbol">λ</a> <a id="5079" href="Middle.Ledger.html#5079" class="Bound">Ps</a> <a id="5082" class="Symbol">→</a> <a id="5084" href="Middle.Ledger.html#5055" class="Bound">H</a> <a id="5086" href="Middle.Ledger.html#5079" class="Bound">Ps</a> <a id="5089" href="Middle.Ledger.html#1884" class="Function">oper-base⋆</a>

<a id="5101" class="Comment">-- ** Separation logic</a>

<a id="mod"></a><a id="5125" href="Middle.Ledger.html#5125" class="Function">mod</a> <a id="5129" class="Symbol">:</a> <a id="5131" href="Middle.Ledger.html#619" class="Function">L</a> <a id="5133" class="Symbol">→</a> <a id="5135" href="Prelude.Sets.Interface.html#444" class="Function">Set⟨</a> <a id="5140" href="Middle.Ledger.html#270" class="Bound">Part</a> <a id="5145" href="Prelude.Sets.Interface.html#444" class="Function">⟩</a>
<a id="5147" href="Middle.Ledger.html#5125" class="Function">mod</a> <a id="5151" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="5154" class="Symbol">=</a> <a id="5156" href="Prelude.Sets.Interface.html#461" class="Function">∅</a>
<a id="5158" href="Middle.Ledger.html#5125" class="Function">mod</a> <a id="5162" class="Symbol">(</a><a id="5163" href="Middle.Ledger.html#5163" class="Bound">p₁</a> <a id="5166" href="Middle.Ledger.html#549" class="InductiveConstructor Operator">—→⟨</a> <a id="5170" class="Symbol">_</a> <a id="5172" href="Middle.Ledger.html#549" class="InductiveConstructor Operator">⟩</a> <a id="5174" href="Middle.Ledger.html#5174" class="Bound">p₂</a> <a id="5177" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="5179" href="Middle.Ledger.html#5179" class="Bound">l</a><a id="5180" class="Symbol">)</a> <a id="5182" class="Symbol">=</a> <a id="5184" href="Prelude.Sets.Interface.html#474" class="Function">singleton</a> <a id="5194" href="Middle.Ledger.html#5163" class="Bound">p₁</a> <a id="5197" href="Prelude.Sets.Interface.html#529" class="Function Operator">∪</a> <a id="5199" href="Prelude.Sets.Interface.html#474" class="Function">singleton</a> <a id="5209" href="Middle.Ledger.html#5174" class="Bound">p₂</a> <a id="5212" href="Prelude.Sets.Interface.html#529" class="Function Operator">∪</a> <a id="5214" href="Middle.Ledger.html#5125" class="Function">mod</a> <a id="5218" href="Middle.Ledger.html#5179" class="Bound">l</a>

<a id="■_"></a><a id="5221" href="Middle.Ledger.html#5221" class="Function Operator">■_</a> <a id="5224" class="Symbol">:</a> <a id="5226" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="5230" class="Symbol">→</a> <a id="5232" href="Middle.Ledger.html#2488" class="Function">Predˢ</a>
<a id="5238" href="Middle.Ledger.html#5221" class="Function Operator">■_</a> <a id="5241" class="Symbol">=</a> <a id="5243" href="Function.Base.html#636" class="Function">const</a>

<a id="_`∧_"></a><a id="5250" href="Middle.Ledger.html#5250" class="Function Operator">_`∧_</a> <a id="5255" class="Symbol">:</a> <a id="5257" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="5263" class="Symbol">→</a> <a id="5265" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="5271" class="Symbol">→</a> <a id="5273" href="Middle.Ledger.html#2488" class="Function">Predˢ</a>
<a id="5279" class="Symbol">(</a><a id="5280" href="Middle.Ledger.html#5280" class="Bound">P</a> <a id="5282" href="Middle.Ledger.html#5250" class="Function Operator">`∧</a> <a id="5285" href="Middle.Ledger.html#5285" class="Bound">Q</a><a id="5286" class="Symbol">)</a> <a id="5288" href="Middle.Ledger.html#5288" class="Bound">s</a> <a id="5290" class="Symbol">=</a> <a id="5292" href="Middle.Ledger.html#5280" class="Bound">P</a> <a id="5294" href="Middle.Ledger.html#5288" class="Bound">s</a> <a id="5296" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5298" href="Middle.Ledger.html#5285" class="Bound">Q</a> <a id="5300" href="Middle.Ledger.html#5288" class="Bound">s</a>

<a id="5303" class="Keyword">infix</a> <a id="5309" class="Number">4</a> <a id="5311" href="Middle.Ledger.html#5315" class="Function Operator">_∗_</a>
<a id="_∗_"></a><a id="5315" href="Middle.Ledger.html#5315" class="Function Operator">_∗_</a> <a id="5319" class="Symbol">:</a> <a id="5321" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="5327" class="Symbol">→</a> <a id="5329" href="Middle.Ledger.html#2488" class="Function">Predˢ</a> <a id="5335" class="Symbol">→</a> <a id="5337" href="Middle.Ledger.html#2488" class="Function">Predˢ</a>
<a id="5343" class="Symbol">(</a><a id="5344" href="Middle.Ledger.html#5344" class="Bound">P</a> <a id="5346" href="Middle.Ledger.html#5315" class="Function Operator">∗</a> <a id="5348" href="Middle.Ledger.html#5348" class="Bound">Q</a><a id="5349" class="Symbol">)</a> <a id="5351" href="Middle.Ledger.html#5351" class="Bound">s</a> <a id="5353" class="Symbol">=</a> <a id="5355" href="Data.Product.html#1369" class="Function">∃</a> <a id="5357" class="Symbol">λ</a> <a id="5359" href="Middle.Ledger.html#5359" class="Bound">s₁</a> <a id="5362" class="Symbol">→</a> <a id="5364" href="Data.Product.html#1369" class="Function">∃</a> <a id="5366" class="Symbol">λ</a> <a id="5368" href="Middle.Ledger.html#5368" class="Bound">s₂</a> <a id="5371" class="Symbol">→</a> <a id="5373" href="Prelude.Maps.Interface.html#1323" class="Function Operator">⟨</a> <a id="5375" href="Middle.Ledger.html#5359" class="Bound">s₁</a> <a id="5378" href="Prelude.Maps.Interface.html#1323" class="Function Operator">⊎</a> <a id="5380" href="Middle.Ledger.html#5368" class="Bound">s₂</a> <a id="5383" href="Prelude.Maps.Interface.html#1323" class="Function Operator">⟩≡</a> <a id="5386" href="Middle.Ledger.html#5351" class="Bound">s</a> <a id="5388" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5390" href="Middle.Ledger.html#5344" class="Bound">P</a> <a id="5392" href="Middle.Ledger.html#5359" class="Bound">s₁</a> <a id="5395" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="5397" href="Middle.Ledger.html#5348" class="Bound">Q</a> <a id="5399" href="Middle.Ledger.html#5368" class="Bound">s₂</a>

<a id="5403" class="Comment">-- `∃_: Predˢ → Predˢ</a>
<a id="5425" class="Comment">-- (`∃ P) s = Σ[ x ∈ A ] P s</a>

<a id="5455" class="Comment">-- inference rules</a>

<a id="[SEP-COMM]"></a><a id="5475" href="Middle.Ledger.html#5475" class="Function">[SEP-COMM]</a> <a id="5486" class="Symbol">:</a> <a id="5488" href="Middle.Ledger.html#2518" class="Generalizable">P</a> <a id="5490" href="Middle.Ledger.html#5315" class="Function Operator">∗</a> <a id="5492" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="5494" href="Prelude.General.html#686" class="Function Operator">⊢</a> <a id="5496" href="Middle.Ledger.html#2529" class="Generalizable">Q</a> <a id="5498" href="Middle.Ledger.html#5315" class="Function Operator">∗</a> <a id="5500" href="Middle.Ledger.html#2518" class="Generalizable">P</a>
<a id="5502" href="Middle.Ledger.html#5475" class="Function">[SEP-COMM]</a> <a id="5513" class="Symbol">{</a><a id="5514" href="Middle.Ledger.html#5514" class="Bound">s</a><a id="5515" class="Symbol">}</a> <a id="5517" class="Symbol">(</a><a id="5518" href="Middle.Ledger.html#5518" class="Bound">s₁</a> <a id="5521" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5523" href="Middle.Ledger.html#5523" class="Bound">s₂</a> <a id="5526" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5528" href="Middle.Ledger.html#5528" class="Bound">s₁⊎s₂</a> <a id="5534" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5536" href="Middle.Ledger.html#5536" class="Bound">Ps₁</a> <a id="5540" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5542" href="Middle.Ledger.html#5542" class="Bound">Qs₂</a><a id="5545" class="Symbol">)</a> <a id="5547" class="Symbol">=</a> <a id="5549" class="Symbol">(</a><a id="5550" href="Middle.Ledger.html#5523" class="Bound">s₂</a> <a id="5553" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5555" href="Middle.Ledger.html#5518" class="Bound">s₁</a> <a id="5558" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5560" href="Prelude.Maps.Interface.html#5410" class="Function">∪≡-comm</a> <a id="5568" href="Middle.Ledger.html#5528" class="Bound">s₁⊎s₂</a> <a id="5574" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5576" href="Middle.Ledger.html#5542" class="Bound">Qs₂</a> <a id="5580" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5582" href="Middle.Ledger.html#5536" class="Bound">Ps₁</a><a id="5585" class="Symbol">)</a>

<a id="5588" class="Comment">{-
[SEP-ASSOC] : P ∗ (Q ∗ R) ⊣⊢ (P ∗ Q) ∗ R
[SEP-ASSOC] = {!!} , {!!}

[SEP-MONO] :
     P₁ ⊢ Q₁
   → P₂ ⊢ Q₂
     -----------------
   → P₁ ∗ P₂ ⊢ Q₁ ∗ Q₂
[SEP-MONO] P₁⊢Q₁ P₂⊢Q₂ = {!!}
-}</a>

<a id="5778" class="Comment">{-
postulate
  fv : Assertion → Set⟨ Part ⟩

[FRAME] :
    ⟨ P ⟩ l ⟨ Q ⟩
  → mod l ∩ fv R ≡ ∅
    -------------------------
  → ⟨ P ∗ R ⟩ l ⟨ Q ∗ R ⟩
-}</a>

<a id="5932" class="Comment">-- ** Concurrent separation logic</a>
<a id="5966" class="Comment">{-
[INTERLEAVE]
    Interleaving l l′ l″
  → ⟨ P ⟩ l ⟨ Q ⟩
  → ⟨ P ⟩ l′ ⟨ Q ⟩
  → mod l ∩ mod l′ ≡ ∅
    ------------------------
  → ⟨ P ∗ P′ ⟩ l″ ⟨ Q ∗ Q′ ⟩
-}</a>
</pre></body></html>