<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ValueSepUTxO.AbstractUTxO</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------</a>
<a id="48" class="Comment">-- ** Abstract definition for UTxO-based ledgers.</a>

<a id="99" class="Keyword">module</a> <a id="106" href="ValueSepUTxO.AbstractUTxO.html" class="Module">ValueSepUTxO.AbstractUTxO</a> <a id="132" class="Keyword">where</a>

<a id="139" class="Keyword">open</a> <a id="144" class="Keyword">import</a> <a id="151" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="163" class="Symbol">;</a> <a id="165" class="Keyword">open</a> <a id="170" href="Prelude.Init.html#35" class="Module">SetAsType</a>
<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="Prelude.Decidable.html" class="Module">Prelude.Decidable</a>
<a id="264" class="Keyword">open</a> <a id="269" class="Keyword">import</a> <a id="276" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Prelude.DecLists.html" class="Module">Prelude.DecLists</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Prelude.FromList.html" class="Module">Prelude.FromList</a>
<a id="432" class="Keyword">open</a> <a id="437" class="Keyword">import</a> <a id="444" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>
<a id="456" class="Keyword">open</a> <a id="461" class="Keyword">import</a> <a id="468" href="Prelude.Semigroup.html" class="Module">Prelude.Semigroup</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Prelude.Monoid.html" class="Module">Prelude.Monoid</a>

<a id="514" class="Comment">-- open import ValueSepUTxO.AbstractMaps</a>
<a id="555" class="Keyword">open</a> <a id="560" class="Keyword">import</a> <a id="567" href="Prelude.Bags.html" class="Module">Prelude.Bags</a>
<a id="580" class="Keyword">instance</a>
  <a id="Sℕ"></a><a id="591" href="ValueSepUTxO.AbstractUTxO.html#591" class="Function">Sℕ</a>  <a id="595" class="Symbol">=</a> <a id="597" href="Prelude.Semigroup.html#2115" class="Function">Semigroup-ℕ-+</a><a id="610" class="Symbol">;</a> <a id="Sℕ⁺"></a><a id="612" href="ValueSepUTxO.AbstractUTxO.html#612" class="Function">Sℕ⁺</a> <a id="616" class="Symbol">=</a> <a id="618" href="Prelude.Semigroup.html#2408" class="Function">SemigroupLaws-ℕ-+</a>
  <a id="Mℕ"></a><a id="638" href="ValueSepUTxO.AbstractUTxO.html#638" class="Function">Mℕ</a>  <a id="642" class="Symbol">=</a> <a id="644" href="Prelude.Monoid.html#1342" class="Function">Monoid-ℕ-+</a><a id="654" class="Symbol">;</a>    <a id="Mℕ⁺"></a><a id="659" href="ValueSepUTxO.AbstractUTxO.html#659" class="Function">Mℕ⁺</a> <a id="663" class="Symbol">=</a> <a id="665" href="Prelude.Monoid.html#1420" class="Function">MonoidLaws-ℕ-+</a>

<a id="Value"></a><a id="681" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a>   <a id="689" class="Symbol">=</a> <a id="691" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="HashId"></a><a id="693" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>  <a id="701" class="Symbol">=</a> <a id="703" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="Address"></a><a id="705" href="ValueSepUTxO.AbstractUTxO.html#705" class="Function">Address</a> <a id="713" class="Symbol">=</a> <a id="715" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>
<a id="722" class="Keyword">postulate</a> <a id="_♯"></a><a id="732" href="ValueSepUTxO.AbstractUTxO.html#732" class="Postulate Operator">_♯</a> <a id="735" class="Symbol">:</a> <a id="737" class="Symbol">∀</a> <a id="739" class="Symbol">{</a><a id="740" href="ValueSepUTxO.AbstractUTxO.html#740" class="Bound">A</a> <a id="742" class="Symbol">:</a> <a id="744" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="749" href="Prelude.Init.html#345" class="Generalizable">ℓ</a><a id="750" class="Symbol">}</a> <a id="752" class="Symbol">→</a> <a id="754" href="ValueSepUTxO.AbstractUTxO.html#740" class="Bound">A</a> <a id="756" class="Symbol">→</a> <a id="758" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>

<a id="DATA"></a><a id="766" href="ValueSepUTxO.AbstractUTxO.html#766" class="Function">DATA</a> <a id="771" class="Symbol">=</a> <a id="773" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="775" class="Comment">-- T0D0: more realistic data for redeemers</a>

<a id="819" class="Keyword">record</a> <a id="TxOutput"></a><a id="826" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a> <a id="835" class="Symbol">:</a> <a id="837" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="842" class="Keyword">where</a>
  <a id="850" class="Keyword">constructor</a> <a id="_at_"></a><a id="862" href="ValueSepUTxO.AbstractUTxO.html#862" class="InductiveConstructor Operator">_at_</a>
  <a id="869" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="875" href="ValueSepUTxO.AbstractUTxO.html#875" class="Field">value</a>   <a id="883" class="Symbol">:</a> <a id="885" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="899" href="ValueSepUTxO.AbstractUTxO.html#899" class="Field">address</a> <a id="907" class="Symbol">:</a> <a id="909" href="ValueSepUTxO.AbstractUTxO.html#705" class="Function">Address</a>
<a id="917" class="Keyword">open</a> <a id="922" href="ValueSepUTxO.AbstractUTxO.html#826" class="Module">TxOutput</a> <a id="931" class="Keyword">public</a>
<a id="938" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="950" href="ValueSepUTxO.AbstractUTxO.html#950" class="Function">DecEq-TxO</a> <a id="960" class="Symbol">=</a> <a id="962" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="969" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="975" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="977" class="Keyword">quote</a> <a id="983" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a> <a id="992" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="994" href="ValueSepUTxO.AbstractUTxO.html#950" class="Function">DecEq-TxO</a> <a id="1004" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="TxOutputRef"></a><a id="1007" href="ValueSepUTxO.AbstractUTxO.html#1007" class="Function">TxOutputRef</a> <a id="1019" class="Symbol">:</a> <a id="1021" href="Agda.Primitive.html#326" class="Primitive">Type</a>
<a id="1026" href="ValueSepUTxO.AbstractUTxO.html#1007" class="Function">TxOutputRef</a> <a id="1038" class="Symbol">=</a> <a id="1040" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>

<a id="1048" class="Keyword">record</a> <a id="InputInfo"></a><a id="1055" href="ValueSepUTxO.AbstractUTxO.html#1055" class="Record">InputInfo</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1072" class="Keyword">where</a>
  <a id="1080" class="Keyword">field</a> <a id="InputInfo.outputRef"></a><a id="1086" href="ValueSepUTxO.AbstractUTxO.html#1086" class="Field">outputRef</a>     <a id="1100" class="Symbol">:</a> <a id="1102" href="ValueSepUTxO.AbstractUTxO.html#1007" class="Function">TxOutputRef</a>
        <a id="InputInfo.validatorHash"></a><a id="1122" href="ValueSepUTxO.AbstractUTxO.html#1122" class="Field">validatorHash</a> <a id="1136" class="Symbol">:</a> <a id="1138" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>
        <a id="InputInfo.redeemerHash"></a><a id="1153" href="ValueSepUTxO.AbstractUTxO.html#1153" class="Field">redeemerHash</a>  <a id="1167" class="Symbol">:</a> <a id="1169" href="ValueSepUTxO.AbstractUTxO.html#693" class="Function">HashId</a>

<a id="1177" class="Keyword">record</a> <a id="TxInfo"></a><a id="1184" href="ValueSepUTxO.AbstractUTxO.html#1184" class="Record">TxInfo</a> <a id="1191" class="Symbol">:</a> <a id="1193" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1198" class="Keyword">where</a>
  <a id="1206" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="1212" href="ValueSepUTxO.AbstractUTxO.html#1212" class="Field">inputs</a>  <a id="1220" class="Symbol">:</a> <a id="1222" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1227" href="ValueSepUTxO.AbstractUTxO.html#1055" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="1245" href="ValueSepUTxO.AbstractUTxO.html#1245" class="Field">outputs</a> <a id="1253" class="Symbol">:</a> <a id="1255" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1260" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a>
        <a id="TxInfo.forge"></a><a id="1277" href="ValueSepUTxO.AbstractUTxO.html#1277" class="Field">forge</a>   <a id="1285" class="Symbol">:</a> <a id="1287" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a>

<a id="1294" class="Keyword">record</a> <a id="TxInput"></a><a id="1301" href="ValueSepUTxO.AbstractUTxO.html#1301" class="Record">TxInput</a> <a id="1309" class="Symbol">:</a> <a id="1311" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1316" class="Keyword">where</a>
  <a id="1324" class="Keyword">field</a> <a id="TxInput.outputRef"></a><a id="1330" href="ValueSepUTxO.AbstractUTxO.html#1330" class="Field">outputRef</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a>
        <a id="TxInput.validator"></a><a id="1359" href="ValueSepUTxO.AbstractUTxO.html#1359" class="Field">validator</a> <a id="1369" class="Symbol">:</a> <a id="1371" href="ValueSepUTxO.AbstractUTxO.html#1184" class="Record">TxInfo</a> <a id="1378" class="Symbol">→</a> <a id="1380" href="ValueSepUTxO.AbstractUTxO.html#766" class="Function">DATA</a> <a id="1385" class="Symbol">→</a> <a id="1387" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
        <a id="TxInput.redeemer"></a><a id="1400" href="ValueSepUTxO.AbstractUTxO.html#1400" class="Field">redeemer</a>  <a id="1410" class="Symbol">:</a> <a id="1412" href="ValueSepUTxO.AbstractUTxO.html#766" class="Function">DATA</a>
<a id="1417" class="Keyword">open</a> <a id="1422" href="ValueSepUTxO.AbstractUTxO.html#1301" class="Module">TxInput</a> <a id="1430" class="Keyword">public</a>

<a id="mkInputInfo"></a><a id="1438" href="ValueSepUTxO.AbstractUTxO.html#1438" class="Function">mkInputInfo</a> <a id="1450" class="Symbol">:</a> <a id="1452" href="ValueSepUTxO.AbstractUTxO.html#1301" class="Record">TxInput</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="ValueSepUTxO.AbstractUTxO.html#1055" class="Record">InputInfo</a>
<a id="1472" href="ValueSepUTxO.AbstractUTxO.html#1438" class="Function">mkInputInfo</a> <a id="1484" href="ValueSepUTxO.AbstractUTxO.html#1484" class="Bound">i</a> <a id="1486" class="Symbol">=</a> <a id="1488" class="Keyword">record</a>
  <a id="1497" class="Symbol">{</a> <a id="1499" href="ValueSepUTxO.AbstractUTxO.html#1086" class="Field">outputRef</a>     <a id="1513" class="Symbol">=</a> <a id="1515" href="ValueSepUTxO.AbstractUTxO.html#1484" class="Bound">i</a> <a id="1517" class="Symbol">.</a><a id="1518" href="ValueSepUTxO.AbstractUTxO.html#1330" class="Field">outputRef</a> <a id="1528" href="ValueSepUTxO.AbstractUTxO.html#732" class="Postulate Operator">♯</a>
  <a id="1532" class="Symbol">;</a> <a id="1534" href="ValueSepUTxO.AbstractUTxO.html#1122" class="Field">validatorHash</a> <a id="1548" class="Symbol">=</a> <a id="1550" href="ValueSepUTxO.AbstractUTxO.html#1484" class="Bound">i</a> <a id="1552" class="Symbol">.</a><a id="1553" href="ValueSepUTxO.AbstractUTxO.html#1359" class="Field">validator</a> <a id="1563" href="ValueSepUTxO.AbstractUTxO.html#732" class="Postulate Operator">♯</a>
  <a id="1567" class="Symbol">;</a> <a id="1569" href="ValueSepUTxO.AbstractUTxO.html#1153" class="Field">redeemerHash</a>  <a id="1583" class="Symbol">=</a> <a id="1585" href="ValueSepUTxO.AbstractUTxO.html#1484" class="Bound">i</a> <a id="1587" class="Symbol">.</a><a id="1588" href="ValueSepUTxO.AbstractUTxO.html#1400" class="Field">redeemer</a> <a id="1597" href="ValueSepUTxO.AbstractUTxO.html#732" class="Postulate Operator">♯</a> <a id="1599" class="Symbol">}</a>

<a id="1602" class="Keyword">record</a> <a id="Tx"></a><a id="1609" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a> <a id="1612" class="Symbol">:</a> <a id="1614" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1619" class="Keyword">where</a>
  <a id="1627" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="1637" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a>  <a id="1645" class="Symbol">:</a> <a id="1647" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1652" href="ValueSepUTxO.AbstractUTxO.html#1301" class="Record">TxInput</a>
    <a id="Tx.outputs"></a><a id="1664" href="ValueSepUTxO.AbstractUTxO.html#1664" class="Field">outputs</a> <a id="1672" class="Symbol">:</a> <a id="1674" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1679" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a>
    <a id="Tx.forge"></a><a id="1692" href="ValueSepUTxO.AbstractUTxO.html#1692" class="Field">forge</a>   <a id="1700" class="Symbol">:</a> <a id="1702" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a>
<a id="1708" class="Keyword">open</a> <a id="1713" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Module">Tx</a> <a id="1716" class="Keyword">public</a>

<a id="mkTxInfo"></a><a id="1724" href="ValueSepUTxO.AbstractUTxO.html#1724" class="Function">mkTxInfo</a> <a id="1733" class="Symbol">:</a> <a id="1735" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a> <a id="1738" class="Symbol">→</a> <a id="1740" href="ValueSepUTxO.AbstractUTxO.html#1184" class="Record">TxInfo</a>
<a id="1747" href="ValueSepUTxO.AbstractUTxO.html#1724" class="Function">mkTxInfo</a> <a id="1756" href="ValueSepUTxO.AbstractUTxO.html#1756" class="Bound">tx</a> <a id="1759" class="Symbol">=</a> <a id="1761" class="Keyword">record</a>
  <a id="1770" class="Symbol">{</a> <a id="1772" href="ValueSepUTxO.AbstractUTxO.html#1212" class="Field">inputs</a>  <a id="1780" class="Symbol">=</a> <a id="1782" href="ValueSepUTxO.AbstractUTxO.html#1438" class="Function">mkInputInfo</a> <a id="1794" href="Prelude.Functor.html#301" class="Field Operator">&lt;$&gt;</a> <a id="1798" href="ValueSepUTxO.AbstractUTxO.html#1756" class="Bound">tx</a> <a id="1801" class="Symbol">.</a><a id="1802" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a>
  <a id="1811" class="Symbol">;</a> <a id="1813" href="ValueSepUTxO.AbstractUTxO.html#1245" class="Field">outputs</a> <a id="1821" class="Symbol">=</a> <a id="1823" href="ValueSepUTxO.AbstractUTxO.html#1756" class="Bound">tx</a> <a id="1826" class="Symbol">.</a><a id="1827" href="ValueSepUTxO.AbstractUTxO.html#1664" class="Field">outputs</a>
  <a id="1837" class="Symbol">;</a> <a id="1839" href="ValueSepUTxO.AbstractUTxO.html#1277" class="Field">forge</a>   <a id="1847" class="Symbol">=</a> <a id="1849" href="ValueSepUTxO.AbstractUTxO.html#1756" class="Bound">tx</a> <a id="1852" class="Symbol">.</a><a id="1853" href="ValueSepUTxO.AbstractUTxO.html#1692" class="Field">forge</a> <a id="1859" class="Symbol">}</a>

<a id="1862" class="Comment">-- A ledger is a list of transactions.</a>
<a id="L"></a><a id="1901" href="ValueSepUTxO.AbstractUTxO.html#1901" class="Function">L</a> <a id="1903" class="Symbol">=</a> <a id="1905" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1910" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a>

<a id="1914" class="Comment">-- The state of a ledger maps addresses to a value.</a>

<a id="S"></a><a id="1967" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a> <a id="1969" class="Symbol">:</a> <a id="1971" href="Agda.Primitive.html#326" class="Primitive">Type</a>
<a id="1976" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a> <a id="1978" class="Symbol">=</a> <a id="1980" href="Prelude.Bags.html#241" class="Function Operator">Bag⟨</a> <a id="1985" href="ValueSepUTxO.AbstractUTxO.html#705" class="Function">Address</a> <a id="1993" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1995" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a> <a id="2001" href="Prelude.Bags.html#241" class="Function Operator">⟩</a>

<a id="2004" class="Keyword">instance</a>
  <a id="FromList-S"></a><a id="2015" href="ValueSepUTxO.AbstractUTxO.html#2015" class="Function">FromList-S</a> <a id="2026" class="Symbol">:</a> <a id="2028" href="Prelude.FromList.html#91" class="Record">FromList</a> <a id="2037" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a> <a id="2046" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a>
  <a id="2050" href="ValueSepUTxO.AbstractUTxO.html#2015" class="Function">FromList-S</a> <a id="2061" class="Symbol">.</a><a id="2062" href="Prelude.FromList.html#155" class="Field">fromList</a> <a id="2071" class="Symbol">=</a> <a id="2073" href="Prelude.FromList.html#155" class="Field">fromList</a> <a id="2082" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2084" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2088" class="Symbol">(λ</a> <a id="2091" href="ValueSepUTxO.AbstractUTxO.html#2091" class="Bound">txo</a> <a id="2095" class="Symbol">→</a> <a id="2097" href="ValueSepUTxO.AbstractUTxO.html#2091" class="Bound">txo</a> <a id="2101" class="Symbol">.</a><a id="2102" href="ValueSepUTxO.AbstractUTxO.html#899" class="Field">address</a> <a id="2110" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2112" href="ValueSepUTxO.AbstractUTxO.html#2091" class="Bound">txo</a> <a id="2116" class="Symbol">.</a><a id="2117" href="ValueSepUTxO.AbstractUTxO.html#875" class="Field">value</a><a id="2122" class="Symbol">)</a>

<a id="outputRefs"></a><a id="2125" href="ValueSepUTxO.AbstractUTxO.html#2125" class="Function">outputRefs</a> <a id="2136" class="Symbol">:</a> <a id="2138" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a> <a id="2141" class="Symbol">→</a> <a id="2143" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2148" href="ValueSepUTxO.AbstractUTxO.html#826" class="Record">TxOutput</a>
<a id="2157" href="ValueSepUTxO.AbstractUTxO.html#2125" class="Function">outputRefs</a> <a id="2168" class="Symbol">=</a> <a id="2170" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2174" href="ValueSepUTxO.AbstractUTxO.html#1330" class="Field">outputRef</a> <a id="2184" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2186" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a>

<a id="stxoTx"></a><a id="2194" href="ValueSepUTxO.AbstractUTxO.html#2194" class="Function">stxoTx</a> <a id="utxoTx"></a><a id="2201" href="ValueSepUTxO.AbstractUTxO.html#2201" class="Function">utxoTx</a> <a id="2208" class="Symbol">:</a> <a id="2210" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a> <a id="2213" class="Symbol">→</a> <a id="2215" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a>
<a id="2217" href="ValueSepUTxO.AbstractUTxO.html#2194" class="Function">stxoTx</a> <a id="2224" class="Symbol">=</a> <a id="2226" href="Prelude.FromList.html#155" class="Field">fromList</a> <a id="2235" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2237" href="ValueSepUTxO.AbstractUTxO.html#2125" class="Function">outputRefs</a>
<a id="2248" href="ValueSepUTxO.AbstractUTxO.html#2201" class="Function">utxoTx</a> <a id="2255" class="Symbol">=</a> <a id="2257" href="Prelude.FromList.html#155" class="Field">fromList</a> <a id="2266" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2268" href="ValueSepUTxO.AbstractUTxO.html#1664" class="Field">outputs</a>

<a id="∑"></a><a id="2277" href="ValueSepUTxO.AbstractUTxO.html#2277" class="Function">∑</a> <a id="2279" class="Symbol">:</a> <a id="2281" class="Symbol">∀</a> <a id="2283" class="Symbol">{</a><a id="2284" href="ValueSepUTxO.AbstractUTxO.html#2284" class="Bound">A</a> <a id="2286" class="Symbol">:</a> <a id="2288" href="Agda.Primitive.html#326" class="Primitive">Type</a><a id="2292" class="Symbol">}</a> <a id="2294" class="Symbol">→</a> <a id="2296" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2301" href="ValueSepUTxO.AbstractUTxO.html#2284" class="Bound">A</a> <a id="2303" class="Symbol">→</a> <a id="2305" class="Symbol">(</a><a id="2306" href="ValueSepUTxO.AbstractUTxO.html#2284" class="Bound">A</a> <a id="2308" class="Symbol">→</a> <a id="2310" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a><a id="2315" class="Symbol">)</a> <a id="2317" class="Symbol">→</a> <a id="2319" href="ValueSepUTxO.AbstractUTxO.html#681" class="Function">Value</a>
<a id="2325" href="ValueSepUTxO.AbstractUTxO.html#2277" class="Function">∑</a> <a id="2327" href="ValueSepUTxO.AbstractUTxO.html#2327" class="Bound">xs</a> <a id="2330" href="ValueSepUTxO.AbstractUTxO.html#2330" class="Bound">f</a> <a id="2332" class="Symbol">=</a> <a id="2334" href="Prelude.Lists.Sums.html#271" class="Function">∑ℕ</a> <a id="2337" class="Symbol">(</a><a id="2338" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2342" href="ValueSepUTxO.AbstractUTxO.html#2330" class="Bound">f</a> <a id="2344" href="ValueSepUTxO.AbstractUTxO.html#2327" class="Bound">xs</a><a id="2346" class="Symbol">)</a>

<a id="2349" class="Keyword">record</a> <a id="IsValidTx"></a><a id="2356" href="ValueSepUTxO.AbstractUTxO.html#2356" class="Record">IsValidTx</a> <a id="2366" class="Symbol">(</a><a id="2367" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2370" class="Symbol">:</a> <a id="2372" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a><a id="2374" class="Symbol">)</a> <a id="2376" class="Symbol">(</a><a id="2377" href="ValueSepUTxO.AbstractUTxO.html#2377" class="Bound">utxos</a> <a id="2383" class="Symbol">:</a> <a id="2385" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a><a id="2386" class="Symbol">)</a> <a id="2388" class="Symbol">:</a> <a id="2390" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="2395" class="Keyword">where</a>
  <a id="2403" class="Keyword">field</a>
    <a id="IsValidTx.validOutputRefs"></a><a id="2413" href="ValueSepUTxO.AbstractUTxO.html#2413" class="Field">validOutputRefs</a> <a id="2429" class="Symbol">:</a>
      <a id="2437" href="ValueSepUTxO.AbstractUTxO.html#2194" class="Function">stxoTx</a> <a id="2444" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2447" href="Prelude.Bags.AsLists.html#2983" class="Function Operator">⊆ˢ</a> <a id="2450" href="ValueSepUTxO.AbstractUTxO.html#2377" class="Bound">utxos</a>

    <a id="IsValidTx.preservesValues"></a><a id="2461" href="ValueSepUTxO.AbstractUTxO.html#2461" class="Field">preservesValues</a> <a id="2477" class="Symbol">:</a>
      <a id="2485" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2488" class="Symbol">.</a><a id="2489" href="ValueSepUTxO.AbstractUTxO.html#1692" class="Field">forge</a> <a id="2495" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2497" href="ValueSepUTxO.AbstractUTxO.html#2277" class="Function">∑</a> <a id="2499" class="Symbol">(</a><a id="2500" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2503" class="Symbol">.</a><a id="2504" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a><a id="2510" class="Symbol">)</a> <a id="2512" class="Symbol">(</a><a id="2513" href="ValueSepUTxO.AbstractUTxO.html#875" class="Field">value</a> <a id="2519" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2521" href="ValueSepUTxO.AbstractUTxO.html#1330" class="Field">outputRef</a><a id="2530" class="Symbol">)</a> <a id="2532" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2534" href="ValueSepUTxO.AbstractUTxO.html#2277" class="Function">∑</a> <a id="2536" class="Symbol">(</a><a id="2537" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2540" class="Symbol">.</a><a id="2541" href="ValueSepUTxO.AbstractUTxO.html#1664" class="Field">outputs</a><a id="2548" class="Symbol">)</a> <a id="2550" href="ValueSepUTxO.AbstractUTxO.html#875" class="Field">value</a>

    <a id="2561" class="Comment">-- noDoubleSpending :</a>
    <a id="2587" class="Comment">--   Unique (outputRefs tx)</a>

    <a id="IsValidTx.allInputsValidate"></a><a id="2620" href="ValueSepUTxO.AbstractUTxO.html#2620" class="Field">allInputsValidate</a> <a id="2638" class="Symbol">:</a>
      <a id="2646" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="2650" class="Symbol">(λ</a> <a id="2653" href="ValueSepUTxO.AbstractUTxO.html#2653" class="Bound">i</a> <a id="2655" class="Symbol">→</a> <a id="2657" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2659" class="Symbol">(</a><a id="2660" href="ValueSepUTxO.AbstractUTxO.html#1359" class="Field">validator</a> <a id="2670" href="ValueSepUTxO.AbstractUTxO.html#2653" class="Bound">i</a> <a id="2672" class="Symbol">(</a><a id="2673" href="ValueSepUTxO.AbstractUTxO.html#1724" class="Function">mkTxInfo</a> <a id="2682" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a><a id="2684" class="Symbol">)</a> <a id="2686" class="Symbol">(</a><a id="2687" href="ValueSepUTxO.AbstractUTxO.html#2653" class="Bound">i</a> <a id="2689" class="Symbol">.</a><a id="2690" href="ValueSepUTxO.AbstractUTxO.html#1400" class="Field">redeemer</a><a id="2698" class="Symbol">)))</a> <a id="2702" class="Symbol">(</a><a id="2703" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2706" class="Symbol">.</a><a id="2707" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a><a id="2713" class="Symbol">)</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="2720" href="ValueSepUTxO.AbstractUTxO.html#2720" class="Field">validateValidHashes</a> <a id="2740" class="Symbol">:</a>
      <a id="2748" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="2752" class="Symbol">(λ</a> <a id="2755" href="ValueSepUTxO.AbstractUTxO.html#2755" class="Bound">i</a> <a id="2757" class="Symbol">→</a> <a id="2759" href="ValueSepUTxO.AbstractUTxO.html#2755" class="Bound">i</a> <a id="2761" class="Symbol">.</a><a id="2762" href="ValueSepUTxO.AbstractUTxO.html#1330" class="Field">outputRef</a> <a id="2772" class="Symbol">.</a><a id="2773" href="ValueSepUTxO.AbstractUTxO.html#899" class="Field">address</a> <a id="2781" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2783" href="ValueSepUTxO.AbstractUTxO.html#2755" class="Bound">i</a> <a id="2785" class="Symbol">.</a><a id="2786" href="ValueSepUTxO.AbstractUTxO.html#1359" class="Field">validator</a> <a id="2796" href="ValueSepUTxO.AbstractUTxO.html#732" class="Postulate Operator">♯</a><a id="2797" class="Symbol">)</a> <a id="2799" class="Symbol">(</a><a id="2800" href="ValueSepUTxO.AbstractUTxO.html#2367" class="Bound">tx</a> <a id="2803" class="Symbol">.</a><a id="2804" href="ValueSepUTxO.AbstractUTxO.html#1637" class="Field">inputs</a><a id="2810" class="Symbol">)</a>

<a id="2813" class="Keyword">open</a> <a id="2818" href="ValueSepUTxO.AbstractUTxO.html#2356" class="Module">IsValidTx</a> <a id="2828" class="Keyword">public</a>

<a id="isValidTx?"></a><a id="2836" href="ValueSepUTxO.AbstractUTxO.html#2836" class="Function">isValidTx?</a> <a id="2847" class="Symbol">:</a> <a id="2849" class="Symbol">∀</a> <a id="2851" href="ValueSepUTxO.AbstractUTxO.html#2851" class="Bound">tx</a> <a id="2854" href="ValueSepUTxO.AbstractUTxO.html#2854" class="Bound">s</a> <a id="2856" class="Symbol">→</a> <a id="2858" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="2862" class="Symbol">(</a><a id="2863" href="ValueSepUTxO.AbstractUTxO.html#2356" class="Record">IsValidTx</a> <a id="2873" href="ValueSepUTxO.AbstractUTxO.html#2851" class="Bound">tx</a> <a id="2876" href="ValueSepUTxO.AbstractUTxO.html#2854" class="Bound">s</a><a id="2877" class="Symbol">)</a>
<a id="2879" href="ValueSepUTxO.AbstractUTxO.html#2836" class="Function">isValidTx?</a> <a id="2890" href="ValueSepUTxO.AbstractUTxO.html#2890" class="Bound">tx</a> <a id="2893" href="ValueSepUTxO.AbstractUTxO.html#2893" class="Bound">utxos</a>
  <a id="2901" class="Keyword">with</a> <a id="2906" href="Prelude.Decidable.Base.html#125" class="Field">dec</a>
<a id="2910" class="Symbol">...</a> <a id="2914" class="Symbol">|</a> <a id="2916" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="2919" href="ValueSepUTxO.AbstractUTxO.html#2919" class="Bound">¬p</a> <a id="2922" class="Symbol">=</a> <a id="2924" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="2927" class="Symbol">(</a><a id="2928" href="ValueSepUTxO.AbstractUTxO.html#2919" class="Bound">¬p</a> <a id="2931" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2933" href="ValueSepUTxO.AbstractUTxO.html#2413" class="Field">validOutputRefs</a><a id="2948" class="Symbol">)</a>
<a id="2950" class="Symbol">...</a> <a id="2954" class="Symbol">|</a> <a id="2956" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="2960" href="ValueSepUTxO.AbstractUTxO.html#2960" class="Bound">p₁</a>
  <a id="2965" class="Keyword">with</a> <a id="2970" href="Prelude.Decidable.Base.html#125" class="Field">dec</a>
<a id="2974" class="Symbol">...</a> <a id="2978" class="Symbol">|</a> <a id="2980" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="2983" href="ValueSepUTxO.AbstractUTxO.html#2983" class="Bound">¬p</a> <a id="2986" class="Symbol">=</a> <a id="2988" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="2991" class="Symbol">(</a><a id="2992" href="ValueSepUTxO.AbstractUTxO.html#2983" class="Bound">¬p</a> <a id="2995" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2997" href="ValueSepUTxO.AbstractUTxO.html#2461" class="Field">preservesValues</a><a id="3012" class="Symbol">)</a>
<a id="3014" class="Symbol">...</a> <a id="3018" class="Symbol">|</a> <a id="3020" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3024" href="ValueSepUTxO.AbstractUTxO.html#3024" class="Bound">p₂</a>
<a id="3027" class="Comment">--   with dec</a>
<a id="3041" class="Comment">-- ... | no ¬p = no (¬p ∘ noDoubleSpending)</a>
<a id="3085" class="Comment">-- ... | yes p₃</a>
  <a id="3103" class="Keyword">with</a> <a id="3108" href="Prelude.Decidable.Base.html#125" class="Field">dec</a>
<a id="3112" class="Symbol">...</a> <a id="3116" class="Symbol">|</a> <a id="3118" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3121" href="ValueSepUTxO.AbstractUTxO.html#3121" class="Bound">¬p</a> <a id="3124" class="Symbol">=</a> <a id="3126" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3129" class="Symbol">(</a><a id="3130" href="ValueSepUTxO.AbstractUTxO.html#3121" class="Bound">¬p</a> <a id="3133" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3135" href="ValueSepUTxO.AbstractUTxO.html#2620" class="Field">allInputsValidate</a><a id="3152" class="Symbol">)</a>
<a id="3154" class="Symbol">...</a> <a id="3158" class="Symbol">|</a> <a id="3160" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3164" href="ValueSepUTxO.AbstractUTxO.html#3164" class="Bound">p₄</a>
  <a id="3169" class="Keyword">with</a> <a id="3174" href="Prelude.Decidable.Base.html#125" class="Field">dec</a>
<a id="3178" class="Symbol">...</a> <a id="3182" class="Symbol">|</a> <a id="3184" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3187" href="ValueSepUTxO.AbstractUTxO.html#3187" class="Bound">¬p</a> <a id="3190" class="Symbol">=</a> <a id="3192" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3195" class="Symbol">(</a><a id="3196" href="ValueSepUTxO.AbstractUTxO.html#3187" class="Bound">¬p</a> <a id="3199" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3201" href="ValueSepUTxO.AbstractUTxO.html#2720" class="Field">validateValidHashes</a><a id="3220" class="Symbol">)</a>
<a id="3222" class="Symbol">...</a> <a id="3226" class="Symbol">|</a> <a id="3228" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3232" href="ValueSepUTxO.AbstractUTxO.html#3232" class="Bound">p₅</a> <a id="3235" class="Symbol">=</a> <a id="3237" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3241" class="Keyword">record</a> <a id="3248" class="Symbol">{</a> <a id="3250" href="ValueSepUTxO.AbstractUTxO.html#2413" class="Field">validOutputRefs</a> <a id="3266" class="Symbol">=</a> <a id="3268" class="Bound">p₁</a><a id="3270" class="Symbol">;</a> <a id="3272" href="ValueSepUTxO.AbstractUTxO.html#2461" class="Field">preservesValues</a> <a id="3288" class="Symbol">=</a> <a id="3290" class="Bound">p₂</a>
                          <a id="3319" class="Symbol">;</a> <a id="3321" href="ValueSepUTxO.AbstractUTxO.html#2620" class="Field">allInputsValidate</a> <a id="3339" class="Symbol">=</a> <a id="3341" class="Bound">p₄</a><a id="3343" class="Symbol">;</a> <a id="3345" href="ValueSepUTxO.AbstractUTxO.html#2720" class="Field">validateValidHashes</a> <a id="3365" class="Symbol">=</a> <a id="3367" href="ValueSepUTxO.AbstractUTxO.html#3232" class="Bound">p₅</a> <a id="3370" class="Symbol">}</a>

<a id="isValidTx"></a><a id="3373" href="ValueSepUTxO.AbstractUTxO.html#3373" class="Function">isValidTx</a> <a id="3383" class="Symbol">:</a> <a id="3385" href="ValueSepUTxO.AbstractUTxO.html#1609" class="Record">Tx</a> <a id="3388" class="Symbol">→</a> <a id="3390" href="ValueSepUTxO.AbstractUTxO.html#1967" class="Function">S</a> <a id="3392" class="Symbol">→</a> <a id="3394" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="3399" href="ValueSepUTxO.AbstractUTxO.html#3373" class="Function">isValidTx</a> <a id="3409" href="ValueSepUTxO.AbstractUTxO.html#3409" class="Bound">tx</a> <a id="3412" href="ValueSepUTxO.AbstractUTxO.html#3412" class="Bound">s</a> <a id="3414" class="Symbol">=</a> <a id="3416" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌊</a> <a id="3418" href="ValueSepUTxO.AbstractUTxO.html#2836" class="Function">isValidTx?</a> <a id="3429" href="ValueSepUTxO.AbstractUTxO.html#3409" class="Bound">tx</a> <a id="3432" href="ValueSepUTxO.AbstractUTxO.html#3412" class="Bound">s</a> <a id="3434" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌋</a>
</pre></body></html>