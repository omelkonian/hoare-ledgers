<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ValueSepAbstractUTxO.UTxO</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">----------------------------------------------</a>
<a id="48" class="Comment">-- ** Abstract definition for UTxO-based ledgers.</a>

<a id="99" class="Keyword">module</a> <a id="106" href="ValueSepAbstractUTxO.UTxO.html" class="Module">ValueSepAbstractUTxO.UTxO</a> <a id="132" class="Keyword">where</a>

<a id="139" class="Keyword">open</a> <a id="144" class="Keyword">import</a> <a id="151" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="163" class="Symbol">;</a> <a id="165" class="Keyword">open</a> <a id="170" href="Prelude.Init.html#397" class="Module">SetAsType</a>
<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="Prelude.Decidable.html" class="Module">Prelude.Decidable</a>
<a id="264" class="Keyword">open</a> <a id="269" class="Keyword">import</a> <a id="276" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Prelude.DecLists.html" class="Module">Prelude.DecLists</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Prelude.Functor.html" class="Module">Prelude.Functor</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Prelude.FromList.html" class="Module">Prelude.FromList</a>
<a id="432" class="Keyword">open</a> <a id="437" class="Keyword">import</a> <a id="444" href="Prelude.Ord.html" class="Module">Prelude.Ord</a>
<a id="456" class="Keyword">open</a> <a id="461" class="Keyword">import</a> <a id="468" href="Prelude.Semigroup.html" class="Module">Prelude.Semigroup</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Prelude.Monoid.html" class="Module">Prelude.Monoid</a>

<a id="514" class="Keyword">open</a> <a id="519" class="Keyword">import</a> <a id="526" href="Prelude.Bags.html" class="Module">Prelude.Bags</a>
<a id="539" class="Keyword">instance</a>
  <a id="Sℕ"></a><a id="550" href="ValueSepAbstractUTxO.UTxO.html#550" class="Function">Sℕ</a>  <a id="554" class="Symbol">=</a> <a id="556" href="Prelude.Semigroup.html#2138" class="Function">Semigroup-ℕ-+</a><a id="569" class="Symbol">;</a> <a id="Sℕ⁺"></a><a id="571" href="ValueSepAbstractUTxO.UTxO.html#571" class="Function">Sℕ⁺</a> <a id="575" class="Symbol">=</a> <a id="577" href="Prelude.Semigroup.html#2431" class="Function">SemigroupLaws-ℕ-+</a>
  <a id="Mℕ"></a><a id="597" href="ValueSepAbstractUTxO.UTxO.html#597" class="Function">Mℕ</a>  <a id="601" class="Symbol">=</a> <a id="603" href="Prelude.Monoid.html#1365" class="Function">Monoid-ℕ-+</a><a id="613" class="Symbol">;</a>    <a id="Mℕ⁺"></a><a id="618" href="ValueSepAbstractUTxO.UTxO.html#618" class="Function">Mℕ⁺</a> <a id="622" class="Symbol">=</a> <a id="624" href="Prelude.Monoid.html#1443" class="Function">MonoidLaws-ℕ-+</a>

<a id="Value"></a><a id="640" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a>   <a id="648" class="Symbol">=</a> <a id="650" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="HashId"></a><a id="652" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>  <a id="660" class="Symbol">=</a> <a id="662" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="Address"></a><a id="664" href="ValueSepAbstractUTxO.UTxO.html#664" class="Function">Address</a> <a id="672" class="Symbol">=</a> <a id="674" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>
<a id="681" class="Keyword">postulate</a> <a id="_♯"></a><a id="691" href="ValueSepAbstractUTxO.UTxO.html#691" class="Postulate Operator">_♯</a> <a id="694" class="Symbol">:</a> <a id="696" class="Symbol">∀</a> <a id="698" class="Symbol">{</a><a id="699" href="ValueSepAbstractUTxO.UTxO.html#699" class="Bound">A</a> <a id="701" class="Symbol">:</a> <a id="703" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="708" href="Prelude.Init.html#238" class="Generalizable">ℓ</a><a id="709" class="Symbol">}</a> <a id="711" class="Symbol">→</a> <a id="713" href="ValueSepAbstractUTxO.UTxO.html#699" class="Bound">A</a> <a id="715" class="Symbol">→</a> <a id="717" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>

<a id="DATA"></a><a id="725" href="ValueSepAbstractUTxO.UTxO.html#725" class="Function">DATA</a> <a id="730" class="Symbol">=</a> <a id="732" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="734" class="Comment">-- T0D0: more realistic data for redeemers</a>

<a id="778" class="Keyword">record</a> <a id="TxOutput"></a><a id="785" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a> <a id="794" class="Symbol">:</a> <a id="796" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="801" class="Keyword">where</a>
  <a id="809" class="Keyword">constructor</a> <a id="_at_"></a><a id="821" href="ValueSepAbstractUTxO.UTxO.html#821" class="InductiveConstructor Operator">_at_</a>
  <a id="828" class="Keyword">field</a> <a id="TxOutput.value"></a><a id="834" href="ValueSepAbstractUTxO.UTxO.html#834" class="Field">value</a>   <a id="842" class="Symbol">:</a> <a id="844" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a>
        <a id="TxOutput.address"></a><a id="858" href="ValueSepAbstractUTxO.UTxO.html#858" class="Field">address</a> <a id="866" class="Symbol">:</a> <a id="868" href="ValueSepAbstractUTxO.UTxO.html#664" class="Function">Address</a>
<a id="876" class="Keyword">open</a> <a id="881" href="ValueSepAbstractUTxO.UTxO.html#785" class="Module">TxOutput</a> <a id="890" class="Keyword">public</a>
<a id="897" class="Keyword">unquoteDecl</a> <a id="DecEq-TxO"></a><a id="909" href="ValueSepAbstractUTxO.UTxO.html#909" class="Function">DecEq-TxO</a> <a id="919" class="Symbol">=</a> <a id="921" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="928" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="934" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="936" class="Keyword">quote</a> <a id="942" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a> <a id="951" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="953" href="ValueSepAbstractUTxO.UTxO.html#909" class="Function">DecEq-TxO</a> <a id="963" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="TxOutputRef"></a><a id="966" href="ValueSepAbstractUTxO.UTxO.html#966" class="Function">TxOutputRef</a> <a id="978" class="Symbol">:</a> <a id="980" href="Agda.Primitive.html#326" class="Primitive">Type</a>
<a id="985" href="ValueSepAbstractUTxO.UTxO.html#966" class="Function">TxOutputRef</a> <a id="997" class="Symbol">=</a> <a id="999" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>

<a id="1007" class="Keyword">record</a> <a id="InputInfo"></a><a id="1014" href="ValueSepAbstractUTxO.UTxO.html#1014" class="Record">InputInfo</a> <a id="1024" class="Symbol">:</a> <a id="1026" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1031" class="Keyword">where</a>
  <a id="1039" class="Keyword">field</a> <a id="InputInfo.outputRef"></a><a id="1045" href="ValueSepAbstractUTxO.UTxO.html#1045" class="Field">outputRef</a>     <a id="1059" class="Symbol">:</a> <a id="1061" href="ValueSepAbstractUTxO.UTxO.html#966" class="Function">TxOutputRef</a>
        <a id="InputInfo.validatorHash"></a><a id="1081" href="ValueSepAbstractUTxO.UTxO.html#1081" class="Field">validatorHash</a> <a id="1095" class="Symbol">:</a> <a id="1097" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>
        <a id="InputInfo.redeemerHash"></a><a id="1112" href="ValueSepAbstractUTxO.UTxO.html#1112" class="Field">redeemerHash</a>  <a id="1126" class="Symbol">:</a> <a id="1128" href="ValueSepAbstractUTxO.UTxO.html#652" class="Function">HashId</a>
<a id="1135" class="Keyword">unquoteDecl</a> <a id="DecEq-InputInfo"></a><a id="1147" href="ValueSepAbstractUTxO.UTxO.html#1147" class="Function">DecEq-InputInfo</a> <a id="1163" class="Symbol">=</a> <a id="1165" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="1172" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="1178" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1180" class="Keyword">quote</a> <a id="1186" href="ValueSepAbstractUTxO.UTxO.html#1014" class="Record">InputInfo</a> <a id="1196" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1198" href="ValueSepAbstractUTxO.UTxO.html#1147" class="Function">DecEq-InputInfo</a> <a id="1214" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="1217" class="Keyword">record</a> <a id="TxInfo"></a><a id="1224" href="ValueSepAbstractUTxO.UTxO.html#1224" class="Record">TxInfo</a> <a id="1231" class="Symbol">:</a> <a id="1233" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1238" class="Keyword">where</a>
  <a id="1246" class="Keyword">field</a> <a id="TxInfo.inputs"></a><a id="1252" href="ValueSepAbstractUTxO.UTxO.html#1252" class="Field">inputs</a>  <a id="1260" class="Symbol">:</a> <a id="1262" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1267" href="ValueSepAbstractUTxO.UTxO.html#1014" class="Record">InputInfo</a>
        <a id="TxInfo.outputs"></a><a id="1285" href="ValueSepAbstractUTxO.UTxO.html#1285" class="Field">outputs</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1300" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a>
        <a id="TxInfo.forge"></a><a id="1317" href="ValueSepAbstractUTxO.UTxO.html#1317" class="Field">forge</a>   <a id="1325" class="Symbol">:</a> <a id="1327" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a>
<a id="1333" class="Keyword">unquoteDecl</a> <a id="DecEq-TxInfo"></a><a id="1345" href="ValueSepAbstractUTxO.UTxO.html#1345" class="Function">DecEq-TxInfo</a> <a id="1358" class="Symbol">=</a> <a id="1360" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="1367" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="1373" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1375" class="Keyword">quote</a> <a id="1381" href="ValueSepAbstractUTxO.UTxO.html#1224" class="Record">TxInfo</a> <a id="1388" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1390" href="ValueSepAbstractUTxO.UTxO.html#1345" class="Function">DecEq-TxInfo</a> <a id="1403" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="1406" class="Keyword">record</a> <a id="TxInput"></a><a id="1413" href="ValueSepAbstractUTxO.UTxO.html#1413" class="Record">TxInput</a> <a id="1421" class="Symbol">:</a> <a id="1423" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1428" class="Keyword">where</a>
  <a id="1436" class="Keyword">field</a> <a id="TxInput.outputRef"></a><a id="1442" href="ValueSepAbstractUTxO.UTxO.html#1442" class="Field">outputRef</a> <a id="1452" class="Symbol">:</a> <a id="1454" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a>
        <a id="TxInput.validator"></a><a id="1471" href="ValueSepAbstractUTxO.UTxO.html#1471" class="Field">validator</a> <a id="1481" class="Symbol">:</a> <a id="1483" href="ValueSepAbstractUTxO.UTxO.html#1224" class="Record">TxInfo</a> <a id="1490" class="Symbol">→</a> <a id="1492" href="ValueSepAbstractUTxO.UTxO.html#725" class="Function">DATA</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
        <a id="TxInput.redeemer"></a><a id="1512" href="ValueSepAbstractUTxO.UTxO.html#1512" class="Field">redeemer</a>  <a id="1522" class="Symbol">:</a> <a id="1524" href="ValueSepAbstractUTxO.UTxO.html#725" class="Function">DATA</a>
<a id="1529" class="Keyword">open</a> <a id="1534" href="ValueSepAbstractUTxO.UTxO.html#1413" class="Module">TxInput</a> <a id="1542" class="Keyword">public</a>

<a id="mkInputInfo"></a><a id="1550" href="ValueSepAbstractUTxO.UTxO.html#1550" class="Function">mkInputInfo</a> <a id="1562" class="Symbol">:</a> <a id="1564" href="ValueSepAbstractUTxO.UTxO.html#1413" class="Record">TxInput</a> <a id="1572" class="Symbol">→</a> <a id="1574" href="ValueSepAbstractUTxO.UTxO.html#1014" class="Record">InputInfo</a>
<a id="1584" href="ValueSepAbstractUTxO.UTxO.html#1550" class="Function">mkInputInfo</a> <a id="1596" href="ValueSepAbstractUTxO.UTxO.html#1596" class="Bound">i</a> <a id="1598" class="Symbol">=</a> <a id="1600" class="Keyword">record</a>
  <a id="1609" class="Symbol">{</a> <a id="1611" href="ValueSepAbstractUTxO.UTxO.html#1045" class="Field">outputRef</a>     <a id="1625" class="Symbol">=</a> <a id="1627" href="ValueSepAbstractUTxO.UTxO.html#1596" class="Bound">i</a> <a id="1629" class="Symbol">.</a><a id="1630" href="ValueSepAbstractUTxO.UTxO.html#1442" class="Field">outputRef</a> <a id="1640" href="ValueSepAbstractUTxO.UTxO.html#691" class="Postulate Operator">♯</a>
  <a id="1644" class="Symbol">;</a> <a id="1646" href="ValueSepAbstractUTxO.UTxO.html#1081" class="Field">validatorHash</a> <a id="1660" class="Symbol">=</a> <a id="1662" href="ValueSepAbstractUTxO.UTxO.html#1596" class="Bound">i</a> <a id="1664" class="Symbol">.</a><a id="1665" href="ValueSepAbstractUTxO.UTxO.html#1471" class="Field">validator</a> <a id="1675" href="ValueSepAbstractUTxO.UTxO.html#691" class="Postulate Operator">♯</a>
  <a id="1679" class="Symbol">;</a> <a id="1681" href="ValueSepAbstractUTxO.UTxO.html#1112" class="Field">redeemerHash</a>  <a id="1695" class="Symbol">=</a> <a id="1697" href="ValueSepAbstractUTxO.UTxO.html#1596" class="Bound">i</a> <a id="1699" class="Symbol">.</a><a id="1700" href="ValueSepAbstractUTxO.UTxO.html#1512" class="Field">redeemer</a> <a id="1709" href="ValueSepAbstractUTxO.UTxO.html#691" class="Postulate Operator">♯</a> <a id="1711" class="Symbol">}</a>

<a id="1714" class="Keyword">record</a> <a id="Tx"></a><a id="1721" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a> <a id="1724" class="Symbol">:</a> <a id="1726" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1731" class="Keyword">where</a>
  <a id="1739" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="1749" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a>  <a id="1757" class="Symbol">:</a> <a id="1759" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1764" href="ValueSepAbstractUTxO.UTxO.html#1413" class="Record">TxInput</a>
    <a id="Tx.outputs"></a><a id="1776" href="ValueSepAbstractUTxO.UTxO.html#1776" class="Field">outputs</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1791" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a>
    <a id="Tx.forge"></a><a id="1804" href="ValueSepAbstractUTxO.UTxO.html#1804" class="Field">forge</a>   <a id="1812" class="Symbol">:</a> <a id="1814" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a>
<a id="1820" class="Keyword">open</a> <a id="1825" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Module">Tx</a> <a id="1828" class="Keyword">public</a>

<a id="mkTxInfo"></a><a id="1836" href="ValueSepAbstractUTxO.UTxO.html#1836" class="Function">mkTxInfo</a> <a id="1845" class="Symbol">:</a> <a id="1847" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a> <a id="1850" class="Symbol">→</a> <a id="1852" href="ValueSepAbstractUTxO.UTxO.html#1224" class="Record">TxInfo</a>
<a id="1859" href="ValueSepAbstractUTxO.UTxO.html#1836" class="Function">mkTxInfo</a> <a id="1868" href="ValueSepAbstractUTxO.UTxO.html#1868" class="Bound">tx</a> <a id="1871" class="Symbol">=</a> <a id="1873" class="Keyword">record</a>
  <a id="1882" class="Symbol">{</a> <a id="1884" href="ValueSepAbstractUTxO.UTxO.html#1252" class="Field">inputs</a>  <a id="1892" class="Symbol">=</a> <a id="1894" href="ValueSepAbstractUTxO.UTxO.html#1550" class="Function">mkInputInfo</a> <a id="1906" href="Prelude.Functor.html#361" class="Field Operator">&lt;$&gt;</a> <a id="1910" href="ValueSepAbstractUTxO.UTxO.html#1868" class="Bound">tx</a> <a id="1913" class="Symbol">.</a><a id="1914" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a>
  <a id="1923" class="Symbol">;</a> <a id="1925" href="ValueSepAbstractUTxO.UTxO.html#1285" class="Field">outputs</a> <a id="1933" class="Symbol">=</a> <a id="1935" href="ValueSepAbstractUTxO.UTxO.html#1868" class="Bound">tx</a> <a id="1938" class="Symbol">.</a><a id="1939" href="ValueSepAbstractUTxO.UTxO.html#1776" class="Field">outputs</a>
  <a id="1949" class="Symbol">;</a> <a id="1951" href="ValueSepAbstractUTxO.UTxO.html#1317" class="Field">forge</a>   <a id="1959" class="Symbol">=</a> <a id="1961" href="ValueSepAbstractUTxO.UTxO.html#1868" class="Bound">tx</a> <a id="1964" class="Symbol">.</a><a id="1965" href="ValueSepAbstractUTxO.UTxO.html#1804" class="Field">forge</a> <a id="1971" class="Symbol">}</a>

<a id="1974" class="Comment">-- A ledger is a list of transactions.</a>
<a id="L"></a><a id="2013" href="ValueSepAbstractUTxO.UTxO.html#2013" class="Function">L</a> <a id="2015" class="Symbol">=</a> <a id="2017" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2022" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a>

<a id="2026" class="Comment">-- The state of a ledger maps addresses to a value.</a>

<a id="S"></a><a id="2079" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a> <a id="2081" class="Symbol">:</a> <a id="2083" href="Agda.Primitive.html#326" class="Primitive">Type</a>
<a id="2088" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a> <a id="2090" class="Symbol">=</a> <a id="2092" href="Prelude.Bags.html#241" class="Function Operator">Bag⟨</a> <a id="2097" href="ValueSepAbstractUTxO.UTxO.html#664" class="Function">Address</a> <a id="2105" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2107" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a> <a id="2113" href="Prelude.Bags.html#241" class="Function Operator">⟩</a>

<a id="2116" class="Keyword">instance</a>
  <a id="FromList-S"></a><a id="2127" href="ValueSepAbstractUTxO.UTxO.html#2127" class="Function">FromList-S</a> <a id="2138" class="Symbol">:</a> <a id="2140" href="Prelude.FromList.html#107" class="Record">FromList</a> <a id="2149" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a> <a id="2158" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a>
  <a id="2162" href="ValueSepAbstractUTxO.UTxO.html#2127" class="Function">FromList-S</a> <a id="2173" class="Symbol">.</a><a id="2174" href="Prelude.FromList.html#174" class="Field">fromList</a> <a id="2183" class="Symbol">=</a> <a id="2185" href="Prelude.FromList.html#174" class="Field">fromList</a> <a id="2194" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2196" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2200" class="Symbol">(λ</a> <a id="2203" href="ValueSepAbstractUTxO.UTxO.html#2203" class="Bound">txo</a> <a id="2207" class="Symbol">→</a> <a id="2209" href="ValueSepAbstractUTxO.UTxO.html#2203" class="Bound">txo</a> <a id="2213" class="Symbol">.</a><a id="2214" href="ValueSepAbstractUTxO.UTxO.html#858" class="Field">address</a> <a id="2222" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2224" href="ValueSepAbstractUTxO.UTxO.html#2203" class="Bound">txo</a> <a id="2228" class="Symbol">.</a><a id="2229" href="ValueSepAbstractUTxO.UTxO.html#834" class="Field">value</a><a id="2234" class="Symbol">)</a>

<a id="outputRefs"></a><a id="2237" href="ValueSepAbstractUTxO.UTxO.html#2237" class="Function">outputRefs</a> <a id="2248" class="Symbol">:</a> <a id="2250" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a> <a id="2253" class="Symbol">→</a> <a id="2255" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2260" href="ValueSepAbstractUTxO.UTxO.html#785" class="Record">TxOutput</a>
<a id="2269" href="ValueSepAbstractUTxO.UTxO.html#2237" class="Function">outputRefs</a> <a id="2280" class="Symbol">=</a> <a id="2282" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2286" href="ValueSepAbstractUTxO.UTxO.html#1442" class="Field">outputRef</a> <a id="2296" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2298" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a>

<a id="stxoTx"></a><a id="2306" href="ValueSepAbstractUTxO.UTxO.html#2306" class="Function">stxoTx</a> <a id="utxoTx"></a><a id="2313" href="ValueSepAbstractUTxO.UTxO.html#2313" class="Function">utxoTx</a> <a id="2320" class="Symbol">:</a> <a id="2322" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a> <a id="2325" class="Symbol">→</a> <a id="2327" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a>
<a id="2329" href="ValueSepAbstractUTxO.UTxO.html#2306" class="Function">stxoTx</a> <a id="2336" class="Symbol">=</a> <a id="2338" href="Prelude.FromList.html#174" class="Field">fromList</a> <a id="2347" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2349" href="ValueSepAbstractUTxO.UTxO.html#2237" class="Function">outputRefs</a>
<a id="2360" href="ValueSepAbstractUTxO.UTxO.html#2313" class="Function">utxoTx</a> <a id="2367" class="Symbol">=</a> <a id="2369" href="Prelude.FromList.html#174" class="Field">fromList</a> <a id="2378" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2380" href="ValueSepAbstractUTxO.UTxO.html#1776" class="Field">outputs</a>

<a id="∑"></a><a id="2389" href="ValueSepAbstractUTxO.UTxO.html#2389" class="Function">∑</a> <a id="2391" class="Symbol">:</a> <a id="2393" class="Symbol">∀</a> <a id="2395" class="Symbol">{</a><a id="2396" href="ValueSepAbstractUTxO.UTxO.html#2396" class="Bound">A</a> <a id="2398" class="Symbol">:</a> <a id="2400" href="Agda.Primitive.html#326" class="Primitive">Type</a><a id="2404" class="Symbol">}</a> <a id="2406" class="Symbol">→</a> <a id="2408" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2413" href="ValueSepAbstractUTxO.UTxO.html#2396" class="Bound">A</a> <a id="2415" class="Symbol">→</a> <a id="2417" class="Symbol">(</a><a id="2418" href="ValueSepAbstractUTxO.UTxO.html#2396" class="Bound">A</a> <a id="2420" class="Symbol">→</a> <a id="2422" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a><a id="2427" class="Symbol">)</a> <a id="2429" class="Symbol">→</a> <a id="2431" href="ValueSepAbstractUTxO.UTxO.html#640" class="Function">Value</a>
<a id="2437" href="ValueSepAbstractUTxO.UTxO.html#2389" class="Function">∑</a> <a id="2439" href="ValueSepAbstractUTxO.UTxO.html#2439" class="Bound">xs</a> <a id="2442" href="ValueSepAbstractUTxO.UTxO.html#2442" class="Bound">f</a> <a id="2444" class="Symbol">=</a> <a id="2446" href="Prelude.Lists.Sums.html#283" class="Function">∑ℕ</a> <a id="2449" class="Symbol">(</a><a id="2450" href="Data.List.Base.html#1544" class="Function">map</a> <a id="2454" href="ValueSepAbstractUTxO.UTxO.html#2442" class="Bound">f</a> <a id="2456" href="ValueSepAbstractUTxO.UTxO.html#2439" class="Bound">xs</a><a id="2458" class="Symbol">)</a>

<a id="2461" class="Keyword">record</a> <a id="IsValidTx"></a><a id="2468" href="ValueSepAbstractUTxO.UTxO.html#2468" class="Record">IsValidTx</a> <a id="2478" class="Symbol">(</a><a id="2479" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2482" class="Symbol">:</a> <a id="2484" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a><a id="2486" class="Symbol">)</a> <a id="2488" class="Symbol">(</a><a id="2489" href="ValueSepAbstractUTxO.UTxO.html#2489" class="Bound">utxos</a> <a id="2495" class="Symbol">:</a> <a id="2497" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a><a id="2498" class="Symbol">)</a> <a id="2500" class="Symbol">:</a> <a id="2502" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="2507" class="Keyword">where</a>
  <a id="2515" class="Keyword">field</a>
    <a id="IsValidTx.validOutputRefs"></a><a id="2525" href="ValueSepAbstractUTxO.UTxO.html#2525" class="Field">validOutputRefs</a> <a id="2541" class="Symbol">:</a>
      <a id="2549" href="ValueSepAbstractUTxO.UTxO.html#2306" class="Function">stxoTx</a> <a id="2556" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2559" href="Prelude.Bags.AsLists.html#2983" class="Function Operator">⊆ˢ</a> <a id="2562" href="ValueSepAbstractUTxO.UTxO.html#2489" class="Bound">utxos</a>

    <a id="IsValidTx.preservesValues"></a><a id="2573" href="ValueSepAbstractUTxO.UTxO.html#2573" class="Field">preservesValues</a> <a id="2589" class="Symbol">:</a>
      <a id="2597" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2600" class="Symbol">.</a><a id="2601" href="ValueSepAbstractUTxO.UTxO.html#1804" class="Field">forge</a> <a id="2607" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2609" href="ValueSepAbstractUTxO.UTxO.html#2389" class="Function">∑</a> <a id="2611" class="Symbol">(</a><a id="2612" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2615" class="Symbol">.</a><a id="2616" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a><a id="2622" class="Symbol">)</a> <a id="2624" class="Symbol">(</a><a id="2625" href="ValueSepAbstractUTxO.UTxO.html#834" class="Field">value</a> <a id="2631" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="2633" href="ValueSepAbstractUTxO.UTxO.html#1442" class="Field">outputRef</a><a id="2642" class="Symbol">)</a> <a id="2644" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2646" href="ValueSepAbstractUTxO.UTxO.html#2389" class="Function">∑</a> <a id="2648" class="Symbol">(</a><a id="2649" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2652" class="Symbol">.</a><a id="2653" href="ValueSepAbstractUTxO.UTxO.html#1776" class="Field">outputs</a><a id="2660" class="Symbol">)</a> <a id="2662" href="ValueSepAbstractUTxO.UTxO.html#834" class="Field">value</a>

    <a id="2673" class="Comment">-- noDoubleSpending :</a>
    <a id="2699" class="Comment">--   Unique (outputRefs tx)</a>

    <a id="IsValidTx.allInputsValidate"></a><a id="2732" href="ValueSepAbstractUTxO.UTxO.html#2732" class="Field">allInputsValidate</a> <a id="2750" class="Symbol">:</a>
      <a id="2758" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="2762" class="Symbol">(λ</a> <a id="2765" href="ValueSepAbstractUTxO.UTxO.html#2765" class="Bound">i</a> <a id="2767" class="Symbol">→</a> <a id="2769" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2771" class="Symbol">(</a><a id="2772" href="ValueSepAbstractUTxO.UTxO.html#1471" class="Field">validator</a> <a id="2782" href="ValueSepAbstractUTxO.UTxO.html#2765" class="Bound">i</a> <a id="2784" class="Symbol">(</a><a id="2785" href="ValueSepAbstractUTxO.UTxO.html#1836" class="Function">mkTxInfo</a> <a id="2794" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a><a id="2796" class="Symbol">)</a> <a id="2798" class="Symbol">(</a><a id="2799" href="ValueSepAbstractUTxO.UTxO.html#2765" class="Bound">i</a> <a id="2801" class="Symbol">.</a><a id="2802" href="ValueSepAbstractUTxO.UTxO.html#1512" class="Field">redeemer</a><a id="2810" class="Symbol">)))</a> <a id="2814" class="Symbol">(</a><a id="2815" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2818" class="Symbol">.</a><a id="2819" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a><a id="2825" class="Symbol">)</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="2832" href="ValueSepAbstractUTxO.UTxO.html#2832" class="Field">validateValidHashes</a> <a id="2852" class="Symbol">:</a>
      <a id="2860" href="Data.List.Relation.Unary.All.html#1444" class="Datatype">All</a> <a id="2864" class="Symbol">(λ</a> <a id="2867" href="ValueSepAbstractUTxO.UTxO.html#2867" class="Bound">i</a> <a id="2869" class="Symbol">→</a> <a id="2871" href="ValueSepAbstractUTxO.UTxO.html#2867" class="Bound">i</a> <a id="2873" class="Symbol">.</a><a id="2874" href="ValueSepAbstractUTxO.UTxO.html#1442" class="Field">outputRef</a> <a id="2884" class="Symbol">.</a><a id="2885" href="ValueSepAbstractUTxO.UTxO.html#858" class="Field">address</a> <a id="2893" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2895" href="ValueSepAbstractUTxO.UTxO.html#2867" class="Bound">i</a> <a id="2897" class="Symbol">.</a><a id="2898" href="ValueSepAbstractUTxO.UTxO.html#1471" class="Field">validator</a> <a id="2908" href="ValueSepAbstractUTxO.UTxO.html#691" class="Postulate Operator">♯</a><a id="2909" class="Symbol">)</a> <a id="2911" class="Symbol">(</a><a id="2912" href="ValueSepAbstractUTxO.UTxO.html#2479" class="Bound">tx</a> <a id="2915" class="Symbol">.</a><a id="2916" href="ValueSepAbstractUTxO.UTxO.html#1749" class="Field">inputs</a><a id="2922" class="Symbol">)</a>

<a id="2925" class="Keyword">open</a> <a id="2930" href="ValueSepAbstractUTxO.UTxO.html#2468" class="Module">IsValidTx</a> <a id="2940" class="Keyword">public</a>

<a id="isValidTx?"></a><a id="2948" href="ValueSepAbstractUTxO.UTxO.html#2948" class="Function">isValidTx?</a> <a id="2959" class="Symbol">:</a> <a id="2961" class="Symbol">∀</a> <a id="2963" href="ValueSepAbstractUTxO.UTxO.html#2963" class="Bound">tx</a> <a id="2966" href="ValueSepAbstractUTxO.UTxO.html#2966" class="Bound">s</a> <a id="2968" class="Symbol">→</a> <a id="2970" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="2974" class="Symbol">(</a><a id="2975" href="ValueSepAbstractUTxO.UTxO.html#2468" class="Record">IsValidTx</a> <a id="2985" href="ValueSepAbstractUTxO.UTxO.html#2963" class="Bound">tx</a> <a id="2988" href="ValueSepAbstractUTxO.UTxO.html#2966" class="Bound">s</a><a id="2989" class="Symbol">)</a>
<a id="2991" href="ValueSepAbstractUTxO.UTxO.html#2948" class="Function">isValidTx?</a> <a id="3002" href="ValueSepAbstractUTxO.UTxO.html#3002" class="Bound">tx</a> <a id="3005" href="ValueSepAbstractUTxO.UTxO.html#3005" class="Bound">utxos</a>
  <a id="3013" class="Keyword">with</a> <a id="3018" href="Prelude.Decidable.Base.html#143" class="Field">dec</a>
<a id="3022" class="Symbol">...</a> <a id="3026" class="Symbol">|</a> <a id="3028" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3031" href="ValueSepAbstractUTxO.UTxO.html#3031" class="Bound">¬p</a> <a id="3034" class="Symbol">=</a> <a id="3036" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3039" class="Symbol">(</a><a id="3040" href="ValueSepAbstractUTxO.UTxO.html#3031" class="Bound">¬p</a> <a id="3043" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3045" href="ValueSepAbstractUTxO.UTxO.html#2525" class="Field">validOutputRefs</a><a id="3060" class="Symbol">)</a>
<a id="3062" class="Symbol">...</a> <a id="3066" class="Symbol">|</a> <a id="3068" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3072" href="ValueSepAbstractUTxO.UTxO.html#3072" class="Bound">p₁</a>
  <a id="3077" class="Keyword">with</a> <a id="3082" href="Prelude.Decidable.Base.html#143" class="Field">dec</a>
<a id="3086" class="Symbol">...</a> <a id="3090" class="Symbol">|</a> <a id="3092" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3095" href="ValueSepAbstractUTxO.UTxO.html#3095" class="Bound">¬p</a> <a id="3098" class="Symbol">=</a> <a id="3100" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3103" class="Symbol">(</a><a id="3104" href="ValueSepAbstractUTxO.UTxO.html#3095" class="Bound">¬p</a> <a id="3107" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3109" href="ValueSepAbstractUTxO.UTxO.html#2573" class="Field">preservesValues</a><a id="3124" class="Symbol">)</a>
<a id="3126" class="Symbol">...</a> <a id="3130" class="Symbol">|</a> <a id="3132" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3136" href="ValueSepAbstractUTxO.UTxO.html#3136" class="Bound">p₂</a>
<a id="3139" class="Comment">--   with dec</a>
<a id="3153" class="Comment">-- ... | no ¬p = no (¬p ∘ noDoubleSpending)</a>
<a id="3197" class="Comment">-- ... | yes p₃</a>
  <a id="3215" class="Keyword">with</a> <a id="3220" href="Prelude.Decidable.Base.html#143" class="Field">dec</a>
<a id="3224" class="Symbol">...</a> <a id="3228" class="Symbol">|</a> <a id="3230" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3233" href="ValueSepAbstractUTxO.UTxO.html#3233" class="Bound">¬p</a> <a id="3236" class="Symbol">=</a> <a id="3238" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3241" class="Symbol">(</a><a id="3242" href="ValueSepAbstractUTxO.UTxO.html#3233" class="Bound">¬p</a> <a id="3245" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3247" href="ValueSepAbstractUTxO.UTxO.html#2732" class="Field">allInputsValidate</a><a id="3264" class="Symbol">)</a>
<a id="3266" class="Symbol">...</a> <a id="3270" class="Symbol">|</a> <a id="3272" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3276" href="ValueSepAbstractUTxO.UTxO.html#3276" class="Bound">p₄</a>
  <a id="3281" class="Keyword">with</a> <a id="3286" href="Prelude.Decidable.Base.html#143" class="Field">dec</a>
<a id="3290" class="Symbol">...</a> <a id="3294" class="Symbol">|</a> <a id="3296" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3299" href="ValueSepAbstractUTxO.UTxO.html#3299" class="Bound">¬p</a> <a id="3302" class="Symbol">=</a> <a id="3304" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3307" class="Symbol">(</a><a id="3308" href="ValueSepAbstractUTxO.UTxO.html#3299" class="Bound">¬p</a> <a id="3311" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="3313" href="ValueSepAbstractUTxO.UTxO.html#2832" class="Field">validateValidHashes</a><a id="3332" class="Symbol">)</a>
<a id="3334" class="Symbol">...</a> <a id="3338" class="Symbol">|</a> <a id="3340" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3344" href="ValueSepAbstractUTxO.UTxO.html#3344" class="Bound">p₅</a> <a id="3347" class="Symbol">=</a> <a id="3349" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3353" class="Keyword">record</a> <a id="3360" class="Symbol">{</a> <a id="3362" href="ValueSepAbstractUTxO.UTxO.html#2525" class="Field">validOutputRefs</a> <a id="3378" class="Symbol">=</a> <a id="3380" class="Bound">p₁</a><a id="3382" class="Symbol">;</a> <a id="3384" href="ValueSepAbstractUTxO.UTxO.html#2573" class="Field">preservesValues</a> <a id="3400" class="Symbol">=</a> <a id="3402" class="Bound">p₂</a>
                          <a id="3431" class="Symbol">;</a> <a id="3433" href="ValueSepAbstractUTxO.UTxO.html#2732" class="Field">allInputsValidate</a> <a id="3451" class="Symbol">=</a> <a id="3453" class="Bound">p₄</a><a id="3455" class="Symbol">;</a> <a id="3457" href="ValueSepAbstractUTxO.UTxO.html#2832" class="Field">validateValidHashes</a> <a id="3477" class="Symbol">=</a> <a id="3479" href="ValueSepAbstractUTxO.UTxO.html#3344" class="Bound">p₅</a> <a id="3482" class="Symbol">}</a>

<a id="isValidTx"></a><a id="3485" href="ValueSepAbstractUTxO.UTxO.html#3485" class="Function">isValidTx</a> <a id="3495" class="Symbol">:</a> <a id="3497" href="ValueSepAbstractUTxO.UTxO.html#1721" class="Record">Tx</a> <a id="3500" class="Symbol">→</a> <a id="3502" href="ValueSepAbstractUTxO.UTxO.html#2079" class="Function">S</a> <a id="3504" class="Symbol">→</a> <a id="3506" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="3511" href="ValueSepAbstractUTxO.UTxO.html#3485" class="Function">isValidTx</a> <a id="3521" href="ValueSepAbstractUTxO.UTxO.html#3521" class="Bound">tx</a> <a id="3524" href="ValueSepAbstractUTxO.UTxO.html#3524" class="Bound">s</a> <a id="3526" class="Symbol">=</a> <a id="3528" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌊</a> <a id="3530" href="ValueSepAbstractUTxO.UTxO.html#2948" class="Function">isValidTx?</a> <a id="3541" href="ValueSepAbstractUTxO.UTxO.html#3521" class="Bound">tx</a> <a id="3544" href="ValueSepAbstractUTxO.UTxO.html#3524" class="Bound">s</a> <a id="3546" href="Relation.Nullary.Decidable.Core.html#1312" class="Function Operator">⌋</a>
</pre></body></html>